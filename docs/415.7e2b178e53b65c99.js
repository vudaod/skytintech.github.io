"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[415],{1415:(Qi,O,s)=>{s.r(O),s.d(O,{DocumentLibraryModule:()=>Yi});var u=s(9808),J=s(2784),T=s(6087),v=s(4847),W=s(4913),w=s(6787),j=s(3753),q=s(2868),S=s(13),U=s(5778),D=s(2676),y=s(591),M=s(1086),Y=s(7221),k=s(537);class z{constructor(r){this.documentService=r,this.documentsSubject=new y.X([]),this.responseHeaderSubject=new y.X(null),this.loadingSubject=new y.X(!1),this.loading$=this.loadingSubject.asObservable(),this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}get data(){return this._data}set data(r){this._data=r}connect(r){return this.documentsSubject.asObservable()}disconnect(r){this.documentsSubject.complete(),this.loadingSubject.complete()}loadDocuments(r){this.loadingSubject.next(!0),this.documentService.getDocuments(r).pipe((0,Y.K)(()=>(0,M.of)([])),(0,k.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{const n=JSON.parse(t.headers.get("X-Pagination"));this.responseHeaderSubject.next(n),this._data=[...t.body],this.documentsSubject.next(this._data)})}}var K=s(449),P=s(6927),m=s(3075),_=s(2349),p=s(2851),g=s(4598),h=s(1357),e=s(5e3),X=s(3037),A=s(690),N=s(2457),ee=s(3023),L=s(6107),x=s(773),I=s(7446),f=s(6370),R=s(9814),C=s(2925);function te(i,r){1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SUBJECT_IS_REQUIRED")," "))}function ie(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,te,3,3,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("subject").errors?null:t.reminderForm.get("subject").errors.required)}}function ne(i,r){1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MESSAGE_IS_REQUIRED")," "))}function re(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ne,3,3,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("message").errors?null:t.reminderForm.get("message").errors.required)}}function oe(i,r){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function ae(i,r){1&i&&(e.TgZ(0,"div")(1,"div",27),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"FREQUENCY_IS_REQUIRED")," "))}function se(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",28)(2,"label",29),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"select",30),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFrequencyChange())}),e.TgZ(6,"option",31),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,oe,2,2,"option",32),e.qZA(),e.YNc(10,ae,4,3,"div",12),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,4,"FREQUENCY"),""),e.xp6(4),e.hij("--",e.lcZ(8,6,"NONE"),"--"),e.xp6(2),e.Q6J("ngForOf",t.reminderFrequencies),e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("frequency").errors?null:t.reminderForm.get("frequency").errors.required)}}function de(i,r){if(1&i&&(e.TgZ(0,"div",40),e.ynx(1,41),e.TgZ(2,"mat-checkbox",42),e._uU(3),e.qZA(),e.BQk(),e.qZA()),2&i){const t=r.$implicit,n=r.index;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.hij(" ",t.controls.name.value," ")}}function me(i,r){if(1&i&&(e.TgZ(0,"div",36)(1,"label",37),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",38),e.YNc(5,de,4,2,"div",39),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAYS")),e.xp6(3),e.Q6J("ngForOf",t.dailyRemindersArray.controls)}}function ce(i,r){if(1&i&&(e.TgZ(0,"mat-radio-button",47),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function le(i,r){if(1&i&&(e.TgZ(0,"div",36)(1,"label",43),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",44)(5,"mat-radio-group",45),e.YNc(6,ce,2,2,"mat-radio-button",46),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAYS")),e.xp6(4),e.Q6J("ngForOf",t.dayOfWeek)}}function ue(i,r){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function pe(i,r){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function he(i,r){1&i&&(e.TgZ(0,"div")(1,"div",27),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function _e(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,41),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",53),e.NdJ("change",function(){const a=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.onDateChange(a))}),e.YNc(6,ue,2,2,"option",32),e.qZA()(),e.TgZ(7,"td")(8,"select",54),e.NdJ("change",function(){const a=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.onDateChange(a))}),e.YNc(9,pe,2,2,"option",32),e.qZA(),e.YNc(10,he,4,3,"div",12),e.qZA(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.controls.name.value),e.xp6(3),e.Q6J("ngForOf",t.controls.monthValues.value),e.xp6(3),e.Q6J("ngForOf",o.days),e.xp6(1),e.Q6J("ngIf",t.get("day").touched&&t.hasError("invalidDate"))}}function ge(i,r){if(1&i&&(e.TgZ(0,"div",36)(1,"label",48),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",49)(5,"table",50)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",51),e.YNc(16,_e,11,5,"tr",52),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_QUARTER_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"SELECT_REMINDER_MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"SELECT_REMINDER_DAY")),e.xp6(3),e.Q6J("ngForOf",t.quarterlyRemindersArray.controls)}}function fe(i,r){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function ve(i,r){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ye(i,r){1&i&&(e.TgZ(0,"div")(1,"div",27),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function Ze(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,41),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",53),e.NdJ("change",function(){const a=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.onDateChange(a))}),e.YNc(6,fe,2,2,"option",32),e.qZA()(),e.TgZ(7,"td")(8,"select",54),e.NdJ("change",function(){const a=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.onDateChange(a))}),e.YNc(9,ve,2,2,"option",32),e.qZA(),e.YNc(10,ye,4,3,"div",12),e.qZA(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.controls.name.value),e.xp6(3),e.Q6J("ngForOf",t.controls.monthValues.value),e.xp6(3),e.Q6J("ngForOf",o.days),e.xp6(1),e.Q6J("ngIf",t.get("day").touched&&t.hasError("invalidDate"))}}function Te(i,r){if(1&i&&(e.TgZ(0,"div",36)(1,"label",55),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",56)(5,"table",50)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",57),e.YNc(16,Ze,11,5,"tr",52),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"SELECT_REMINDER_MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"SELECT_REMINDER_DAY")),e.xp6(3),e.Q6J("ngForOf",t.halfYearlyRemindersArray.controls)}}function De(i,r){if(1&i&&(e.TgZ(0,"div",6)(1,"div",34),e.YNc(2,me,6,4,"div",35),e.YNc(3,le,7,4,"div",35),e.YNc(4,ge,17,10,"div",35),e.YNc(5,Te,17,10,"div",35),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf","0"==t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","1"==t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","3"==t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","4"==t.reminderForm.get("frequency").value)}}function Ae(i,r){1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DATE_IS_REQUIRED")," "))}function xe(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ae,3,3,"div",26),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.required)}}function Re(i,r){1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function Ce(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Re,3,3,"div",26),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.owlDateTimeMin)}}function be(i,r){if(1&i&&(e.TgZ(0,"div",28)(1,"label",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",58),e.YNc(5,xe,2,1,"div",12),e.YNc(6,Ce,2,1,"div",12),e._UZ(7,"owl-date-time",null,59),e.qZA()),2&i){const t=e.MAs(8),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,6,"REMINDER_DATE"),""),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors)}}function Fe(i,r){1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_IS_REQUIRED")," "))}function qe(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Fe,3,3,"div",26),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.required)}}function Ne(i,r){1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function Le(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ne,3,3,"div",26),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("startDate").errors?null:t.reminderForm.get("startDate").errors.owlDateTimeMin)}}function Ee(i,r){if(1&i&&(e.TgZ(0,"div",28)(1,"label",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",60),e.YNc(5,qe,2,1,"div",12),e.YNc(6,Le,2,1,"div",12),e._UZ(7,"owl-date-time",null,61),e.qZA()),2&i){const t=e.MAs(8),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,6,"REMINDER_START_DATE"),""),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("startDate").touched&&n.reminderForm.get("startDate").errors)}}function Se(i,r){if(1&i&&(e.TgZ(0,"div",28)(1,"label",29),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",62),e.ALo(5,"translate"),e._UZ(6,"owl-date-time",null,63),e.qZA()),2&i){const t=e.MAs(7);e.xp6(2),e.Oqu(e.lcZ(3,4,"REMINDER_END_DATE")),e.xp6(2),e.s9C("placeholder",e.lcZ(5,6,"REMINDER_END_DATE")),e.Q6J("owlDateTimeTrigger",t)("owlDateTime",t)}}function Ue(i,r){1&i&&(e.TgZ(0,"div",64),e._UZ(1,"mat-spinner"),e.qZA())}let Ye=(()=>{class i extends D.H{constructor(t,n,o,a,d,l,b,F){super(),this.fb=t,this.reminderService=n,this.commonService=o,this.toastrService=a,this.data=d,this.dialogRef=l,this.securityService=b,this.translationService=F,this.reminderFrequencies=[],this.minDate=new Date,this.users=[],this.selectedUsers=[],this.isLoading=!1,this.dayOfWeek=[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}],this.months=[{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}],this.days=[]}get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}ngOnInit(){for(let t=1;t<=31;t++)this.days.push(t);this.getReminderFrequency(),this.createReminderForm(),this.getAuthObj()}getAuthObj(){this.sub$.sink=this.securityService.SecurityObject.subscribe(t=>{this.securityObject=t})}closeDialog(){this.dialogRef.close()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(t=>this.reminderFrequencies=[...t])}createReminderForm(){var t=new Date;this.reminderForm=this.fb.group({id:[""],subject:["",[m.kI.required]],message:["",[m.kI.required]],frequency:[""],isRepeated:[!1],isEmailNotification:[!1],startDate:[t,[m.kI.required]],endDate:[null],dayOfWeek:[2],documentId:[this.data.id]})}checkData(t){t.checked?this.reminderForm.get("frequency").setValidators([m.kI.required]):this.reminderForm.get("frequency").setValidators([]),this.reminderForm.markAllAsTouched()}createReminder(){if(!this.reminderForm.valid)return void this.reminderForm.markAllAsTouched();let t=this.reminderForm.value;t.reminderUsers=[{reminderId:t.id,userId:this.securityObject.id}],t.isRepeated||(t.dailyReminders=[],t.quarterlyReminders=[],t.halfYearlyReminders=[]),this.reminder?(t.dailyReminders&&(t.dailyReminders=t.dailyReminders.map(n=>(n.reminderId=this.reminder.id,n))),t.quarterlyReminders&&(t.quarterlyReminders=t.quarterlyReminders.map(n=>(n.reminderId=this.reminder.id,n))),t.halfYearlyReminders&&(t.halfYearlyReminders=t.halfYearlyReminders.map(n=>(n.reminderId=this.reminder.id,n))),this.isLoading=!0,this.sub$.sink=this.reminderService.updateReminder(t).subscribe(n=>{this.toastrService.success(this.translationService.getValue("REMINDER_UPDATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},()=>this.isLoading=!1)):(this.isLoading=!0,this.sub$.sink=this.reminderService.addReminder(t).subscribe(n=>{this.toastrService.success(this.translationService.getValue("REMINDER_CREATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},()=>this.isLoading=!1))}getUsers(){this.sub$.sink=this.commonService.getUsers().subscribe(t=>{if(this.users=t,this.reminder){const n=this.reminder.reminderUsers.map(o=>o.userId);this.selectedUsers=this.users.filter(o=>n.indexOf(o.id)>=0)}})}onFrequencyChange(){let t=this.reminderForm.get("frequency").value;t=0==t?"0":t,t==g.D.Daily.toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==g.D.Weekly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(2)):t==g.D.Quarterly.toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==g.D.HalfYearly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){var t=this.fb.array([]);t.push(this.createDailyReminderFormGroup(p.e.Sunday)),t.push(this.createDailyReminderFormGroup(p.e.Monday)),t.push(this.createDailyReminderFormGroup(p.e.Tuesday)),t.push(this.createDailyReminderFormGroup(p.e.Wednesday)),t.push(this.createDailyReminderFormGroup(p.e.Thursday)),t.push(this.createDailyReminderFormGroup(p.e.Friday)),t.push(this.createDailyReminderFormGroup(p.e.Saturday)),this.reminderForm.addControl("dailyReminders",t)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){var t=this.fb.array([]),n=this.months.filter(l=>[1,2,3].indexOf(l.id)>=0),o=this.months.filter(l=>[4,5,6].indexOf(l.id)>=0),a=this.months.filter(l=>[7,8,9].indexOf(l.id)>=0),d=this.months.filter(l=>[10,11,12].indexOf(l.id)>=0);t.push(this.createQuarterlyReminderFormGroup(h.y.Quarter1,"Jan - Mar",n)),t.push(this.createQuarterlyReminderFormGroup(h.y.Quarter2,"Apr - Jun",o)),t.push(this.createQuarterlyReminderFormGroup(h.y.Quarter3,"Jul - Sept",a)),t.push(this.createQuarterlyReminderFormGroup(h.y.Quarter4,"Oct - Dec",d)),this.reminderForm.addControl("quarterlyReminders",t)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){var t=this.fb.array([]),n=this.months.filter(a=>[1,2,3,4,5,6].indexOf(a.id)>=0),o=this.months.filter(a=>[7,8,9,10,11,13].indexOf(a.id)>=0);t.push(this.createHalfYearlyReminderFormGroup(h.y.Quarter1,"Jan - Jun",n)),t.push(this.createHalfYearlyReminderFormGroup(h.y.Quarter2,"Jul - Dec",o)),this.reminderForm.addControl("halfYearlyReminders",t)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(t){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[t],isActive:[!0],name:[p.e[t]]})}createQuarterlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[this.getCurrentDay()],month:[o[0]],name:[n],monthValues:[o]})}createHalfYearlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[this.getCurrentDay()],month:[o[0]],name:[n],monthValues:[o]})}getCurrentDay(){return(new Date).getDate()}onDateChange(t){const n=t.get("day").value,o=t.get("month").value;n>new Date((new Date).getFullYear(),Number.parseInt(o),0).getDate()&&(t.setErrors({invalidDate:"Invalid Date"}),t.markAllAsTouched())}onCancel(){this.dialogRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.QS),e.Y36(X.Z),e.Y36(A.v),e.Y36(N._W),e.Y36(_.WI),e.Y36(_.so),e.Y36(ee.I),e.Y36(L.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:52,vars:31,consts:[[1,"dialog-header"],[1,"folder-dialog-info"],[1,"section-title"],[1,"close-icon","m-2","text-danger",3,"click"],[1,"material-icons","cursor-pointer"],[1,"d-content"],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject"],["formControlName","subject","type","text","id","subject",1,"form-control"],[4,"ngIf"],["for","message"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"col-md-2"],["color","primary","formControlName","isRepeated",3,"change"],["color","primary","formControlName","isEmailNotification"],["class","row",4,"ngIf"],["class","form-group col-md-6",4,"ngIf"],[1,"mt-2","col-md-12"],["type","submit",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"fas","fa-save"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-times-circle"],["class","loading-shade",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"form-group","col-md-6"],["for","frequency"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-md-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","weekDays"],["id","weekDays",1,"row"],["class","col-sm-auto mr-1","formArrayName","dailyReminders",4,"ngFor","ngForOf"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["class","mr-2","color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],[4,"ngFor","ngForOf"],["formControlName","month",1,"form-control",3,"change"],["formControlName","day",1,"form-control",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],["formControlName","startDate","placeholder","Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt2",""],["formControlName","startDate","placeholder","Start Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt3",""],["formControlName","endDate",1,"form-control",3,"owlDateTimeTrigger","owlDateTime","placeholder"],["dt4",""],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(7,"span",4),e._uU(8," close "),e.qZA()()(),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"form",8)(13,"div",6)(14,"div",9)(15,"label",10),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",11),e.YNc(19,ie,2,1,"div",12),e.qZA()(),e.TgZ(20,"div",6)(21,"div",9)(22,"label",13),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"textarea",14),e.YNc(26,re,2,1,"div",12),e.qZA()(),e.TgZ(27,"div",6)(28,"div",15)(29,"mat-checkbox",16),e.NdJ("change",function(a){return n.checkData(a)}),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",15)(33,"mat-checkbox",17),e._uU(34),e.ALo(35,"translate"),e.qZA()()(),e.YNc(36,se,11,8,"div",18),e.YNc(37,De,6,4,"div",18),e.TgZ(38,"div",6),e.YNc(39,be,9,8,"div",19),e.YNc(40,Ee,9,8,"div",19),e.YNc(41,Se,8,8,"div",19),e.TgZ(42,"div",20)(43,"button",21),e.NdJ("click",function(){return n.createReminder()}),e._UZ(44,"i",22),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"button",23),e.NdJ("click",function(){return n.onCancel()}),e._UZ(48,"i",24),e._uU(49),e.ALo(50,"translate"),e.qZA()()()()()(),e.YNc(51,Ue,2,0,"div",25),e.qZA()),2&t&&(e.xp6(4),e.AsE("",e.lcZ(5,17,"ADD_REMINDER"),":: ",null==n.data?null:n.data.name,""),e.xp6(8),e.Q6J("formGroup",n.reminderForm),e.xp6(4),e.hij(" ",e.lcZ(17,19,"SUBJECT"),""),e.xp6(3),e.Q6J("ngIf",n.reminderForm.get("subject").touched&&n.reminderForm.get("subject").errors),e.xp6(4),e.hij(" ",e.lcZ(24,21,"MESSAGE"),""),e.xp6(3),e.Q6J("ngIf",n.reminderForm.get("message").touched&&n.reminderForm.get("message").errors),e.xp6(4),e.hij(" ",e.lcZ(31,23,"REPEATE_REMINDER")," "),e.xp6(4),e.Oqu(e.lcZ(35,25,"SEND_EMAIL")),e.xp6(2),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(2),e.Q6J("ngIf",!n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(4),e.hij(" ",e.lcZ(46,27,"SAVE")," "),e.xp6(4),e.hij(" ",e.lcZ(50,29,"CANCEL")," "),e.xp6(2),e.Q6J("ngIf",n.isLoading))},dependencies:[u.sg,u.O5,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.sg,m.u,m.x0,m.CE,x.Ou,I.oG,f.sZ,f.BO,f.hV,R.VQ,R.U0,C.X$]}),i})();var Z=s(520),Ie=s(7954),Qe=s(2340),$=s(6943),G=s(7322),Q=s(4107),H=s(508);function Oe(i,r){1&i&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NAME_IS_REQUIRED")," "))}function Je(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Oe,3,3,"div",27),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.documentForm.get("name").errors?null:t.documentForm.get("name").errors.required)}}function we(i,r){if(1&i&&(e.TgZ(0,"div")(1,"b"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name,"")}}function je(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}const Me=function(i){return{"margin-left.px":i}};function ke(i,r){if(1&i&&(e.TgZ(0,"mat-option",29)(1,"div",30),e.YNc(2,we,3,1,"div",11),e.YNc(3,je,2,1,"div",11),e.qZA()()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Q6J("ngStyle",e.VKq(4,Me,20*t.deafLevel)),e.xp6(1),e.Q6J("ngIf",!t.parentId),e.xp6(1),e.Q6J("ngIf",t.parentId)}}function $e(i,r){1&i&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CATEGORY_IS_REQUIRED")," "))}function Ge(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,$e,3,3,"div",27),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.documentForm.get("categoryId").errors?null:t.documentForm.get("categoryId").errors.required)}}function He(i,r){1&i&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DOCUMENT_IS_REQUIRED")," "))}function Ve(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,He,3,3,"div",27),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.documentForm.get("url").errors?null:t.documentForm.get("url").errors.required)}}function Be(i,r){1&i&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DOCUMENT_TYPE_IS_NOT_ALLOW")," "))}function We(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Be,3,3,"div",27),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.documentForm.get("extension").errors?null:t.documentForm.get("extension").errors.required)}}function ze(i,r){1&i&&(e.TgZ(0,"label"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"META_TAGS")," "))}function Ke(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAddAnotherMetaTag())}),e._UZ(1,"i",40),e.qZA()}}function Pe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,a=e.oxw();return e.KtG(a.onDeleteMetaTag(o))}),e._UZ(1,"i",42),e.qZA()}}function Xe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",31),e.ynx(1,32),e.YNc(2,ze,3,3,"label",11),e.TgZ(3,"div",33)(4,"div",34)(5,"input",35),e.NdJ("change",function(o){const d=e.CHM(t).index,l=e.oxw();return e.KtG(l.onMetatagChange(o,d))}),e.qZA()(),e.TgZ(6,"div",36),e.YNc(7,Ke,2,0,"button",37),e.YNc(8,Pe,2,0,"button",38),e.qZA()(),e.BQk(),e.qZA()}if(2&i){const t=r.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngIf",0==t),e.xp6(5),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngIf",0!=t)}}function et(i,r){if(1&i&&e._UZ(0,"mat-progress-bar",43),2&i){const t=e.oxw();e.Q6J("value",t.progress)}}let tt=(()=>{class i extends D.H{constructor(t,n,o,a,d,l,b,F){super(),this.fb=t,this.httpClient=n,this.cd=o,this.categoryService=a,this.dialogRef=d,this.commonService=l,this.toastrService=b,this.translationService=F,this.extension="",this.categories=[],this.allCategories=[],this.onSaveDocument=new e.vpe,this.progress=0,this.message="",this.showProgress=!1,this.isFileUpload=!1}get documentMetaTagsArray(){return this.documentForm.get("documentMetaTags")}ngOnInit(){this.getCategories(),this.createDocumentForm(),this.documentMetaTagsArray.push(this.buildDocumentMetaTag())}getCategories(){this.categoryService.getAllCategoriesForDropDown().subscribe(t=>{this.categories=t,this.setDeafLevel()})}setDeafLevel(t,n){const o=this.categories.filter(a=>a.parentId==n);return o.length>0&&o.map((a,d)=>{a.deafLevel=t?t.deafLevel+1:0,a.index=(t?t.index:0)+d*Math.pow(.1,a.deafLevel),this.allCategories.push(a),this.setDeafLevel(a,a.id)}),t}onDocumentChange(t){const o=(t.target.files||t.srcElement.files)[0];if(this.extension=o.name.split(".").pop(),this.fileExtesionValidation(this.extension)){var a=new FileReader;a.onload=d=>{this.documentSource=d.target.result,this.fileUploadValidation("upload")},a.readAsDataURL(o)}else this.documentSource=null,this.fileUploadValidation("")}fileUploadValidation(t){this.documentForm.patchValue({url:t}),this.documentForm.get("url").markAsTouched(),this.documentForm.updateValueAndValidity()}fileUploadSizeValidation(t){this.documentForm.patchValue({fileSize:t}),this.documentForm.get("fileSize").markAsTouched(),this.documentForm.updateValueAndValidity()}fileUploadExtensionValidation(t){this.documentForm.patchValue({extension:t}),this.documentForm.get("extension").markAsTouched(),this.documentForm.updateValueAndValidity()}fileExtesionValidation(t){return!!Qe.N.allowExtesions.find(a=>a.extentions.find(d=>d===t))}createDocumentForm(){this.documentForm=this.fb.group({name:["",[m.kI.required]],description:[""],categoryId:["",[m.kI.required]],url:["",[m.kI.required]],fileSize:["",[m.kI.required]],extension:["",[m.kI.required]],documentMetaTags:this.fb.array([])})}buildDocumentMetaTag(){return this.fb.group({id:[""],documentId:[""],metatag:[""]})}onMetatagChange(t,n){if(!this.documentMetaTagsArray.at(n).get("metatag").value)return;const a=this.documentMetaTagsArray.at(n).get("metatag");a.setValidators([m.kI.required]),a.updateValueAndValidity()}editDocmentMetaData(t){return this.fb.group({id:[t.id],documentId:[t.documentId],metatag:[t.metatag]})}SaveDocument(){if(this.documentForm.valid){const t=this.buildDocumentObject();this.sub$.sink=this.commonService.addDocumentWithAssign(t).subscribe(n=>{this.addDocumentTrail(n.id),this.toastrService.success(this.translationService.getValue("DOCUMENT_SAVE_SUCCESSFULLY")),this.dialogRef.close(!0)})}else this.markFormGroupTouched(this.documentForm)}onAddAnotherMetaTag(){this.documentMetaTagsArray.insert(0,this.editDocmentMetaData({id:"",documentId:this.document&&this.document.id?this.document.id:"",metatag:""}))}onDeleteMetaTag(t){this.documentMetaTagsArray.removeAt(t)}closeDialog(){this.dialogRef.close()}addDocumentTrail(t){const n={documentId:t,operationName:Ie.g.Created.toString()};this.sub$.sink=this.commonService.addDocumentAuditTrail(n).subscribe(o=>{})}markFormGroupTouched(t){Object.values(t.controls).forEach(n=>{n.markAsTouched(),n.controls&&this.markFormGroupTouched(n)})}buildDocumentObject(){const t=this.documentMetaTagsArray.value;return{id:this.fileInfo.id,categoryId:this.documentForm.get("categoryId").value,description:this.documentForm.get("description").value,name:this.documentForm.get("name").value,url:this.fileInfo.fileName,documentMetaDatas:[...t]}}upload(t){if(0===t.length)return;if(this.extension=t[0].name.split(".").pop(),this.showProgress=!0,!this.fileExtesionValidation(this.extension))return this.fileUploadExtensionValidation(""),this.showProgress=!1,void this.cd.markForCheck();this.fileUploadExtensionValidation("valid"),this.fileUploadSizeValidation("valid");const o=new FormData;for(let d of t)o.append(d.name,d);const a=new Z.aW("POST","api/document/upload",o,{reportProgress:!0});this.sub$.sink=this.httpClient.request(a).subscribe(d=>{d.type===Z.dt.UploadProgress?(this.progress=Math.round(100*d.loaded/d.total),this.cd.markForCheck()):d.type===Z.dt.Response&&(this.fileInfo=d.body,this.fileUploadValidation(this.fileInfo.fileName),this.isFileUpload=!0,this.cd.markForCheck())})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.QS),e.Y36(Z.eN),e.Y36(e.sBO),e.Y36($.H),e.Y36(_.so),e.Y36(A.v),e.Y36(N._W),e.Y36(L.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-document"]],outputs:{onSaveDocument:"onSaveDocument"},features:[e.qOj],decls:59,vars:33,consts:[[1,"dialog-header"],[1,"folder-dialog-info"],[1,"section-title"],[1,"close-icon","m-2","text-danger",3,"click"],[1,"material-icons","cursor-pointer"],[1,"d-content"],[3,"formGroup"],[1,"row"],[1,"col-sm-12"],[1,"form-group"],["formControlName","name","type","text",1,"form-control"],[4,"ngIf"],[1,"col-sm-12","col-md-6"],["formControlName","categoryId",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["formControlName","description",1,"form-control"],[1,"col-md-12"],["type","file",1,"form-control",3,"change"],["file",""],[1,"col-sm-6"],["class","","formArrayName","documentMetaTags",4,"ngFor","ngForOf"],["mode","determinate",3,"value",4,"ngIf"],[1,"m-top-10","col-md-12"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"disabled","click"],[1,"las","la-save"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"las","la-times-circle"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"value"],[1,"country-item",3,"ngStyle"],["formArrayName","documentMetaTags",1,""],[3,"formGroupName"],[1,"form-row"],[1,"form-group","col-md","mb-1","col"],["formControlName","metatag","type","text",1,"form-control",3,"change"],[1,"form-group","col-md-auto","col-auto","mb-1"],["class","btn btn-outline-success","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-danger","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"las","la-plus"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"las","la-trash-alt"],["mode","determinate",3,"value"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(7,"span",4),e._uU(8," close "),e.qZA()()(),e.TgZ(9,"div",5)(10,"form",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",10),e.YNc(18,Je,2,1,"div",11),e.qZA()(),e.TgZ(19,"div",12)(20,"div",9)(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-select",13)(25,"mat-option"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.YNc(28,ke,4,6,"mat-option",14),e.qZA(),e.YNc(29,Ge,2,1,"div",11),e.qZA()(),e.TgZ(30,"div",8)(31,"div",9)(32,"label"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"textarea",15),e._uU(36,"        "),e.qZA()()(),e.TgZ(37,"div",16)(38,"div",9)(39,"label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"input",17,18),e.NdJ("change",function(){e.CHM(o);const d=e.MAs(43);return e.KtG(n.upload(d.files))}),e.qZA(),e.YNc(44,Ve,2,1,"div",11),e.YNc(45,We,2,1,"div",11),e.qZA()(),e.TgZ(46,"div",19),e.YNc(47,Xe,9,4,"div",20),e.qZA(),e.TgZ(48,"div",16),e.YNc(49,et,1,1,"mat-progress-bar",21),e.qZA(),e.TgZ(50,"div",22)(51,"button",23),e.NdJ("click",function(){return n.SaveDocument()}),e._UZ(52,"i",24),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"button",25),e.NdJ("click",function(){return n.closeDialog()}),e._UZ(56,"i",26),e._uU(57),e.ALo(58,"translate"),e.qZA()()()()()}2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,17,"ADD_DOCUMENT")),e.xp6(6),e.Q6J("formGroup",n.documentForm),e.xp6(5),e.Oqu(e.lcZ(16,19,"NAME")),e.xp6(3),e.Q6J("ngIf",n.documentForm.get("name").touched&&n.documentForm.get("name").errors),e.xp6(4),e.Oqu(e.lcZ(23,21,"CATEGORY")),e.xp6(4),e.hij("-- ",e.lcZ(27,23,"NONE")," --"),e.xp6(2),e.Q6J("ngForOf",n.allCategories),e.xp6(1),e.Q6J("ngIf",n.documentForm.get("categoryId").touched&&n.documentForm.get("categoryId").errors),e.xp6(4),e.Oqu(e.lcZ(34,25,"DESCRIPTION")),e.xp6(7),e.Oqu(e.lcZ(41,27,"DOCUMENT_UPLOAD")),e.xp6(4),e.Q6J("ngIf",(n.documentForm.get("url").touched||n.documentForm.get("url").dirty)&&n.documentForm.get("url").errors),e.xp6(1),e.Q6J("ngIf",(n.documentForm.get("extension").touched||n.documentForm.get("extension").dirty)&&n.documentForm.get("url").errors),e.xp6(2),e.Q6J("ngForOf",n.documentMetaTagsArray.controls),e.xp6(2),e.Q6J("ngIf",n.showProgress),e.xp6(2),e.Q6J("disabled",!n.isFileUpload),e.xp6(2),e.hij(" ",e.lcZ(54,29,"SAVE"),""),e.xp6(4),e.hij(" ",e.lcZ(58,31,"CANCEL"),""))},dependencies:[u.sg,u.O5,u.PC,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.x0,m.CE,G.hX,Q.gD,H.ey,C.X$]}),i})();var it=s(4702),nt=s(8929);function rt(i,r){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function ot(i,r){1&i&&(e.TgZ(0,"div")(1,"div",28),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"FREQUENCY_IS_REQUIRED")," "))}function at(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",21)(2,"label",22),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"select",23),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onFrequencyChange())}),e.TgZ(6,"option",24),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,rt,2,2,"option",25),e.qZA(),e.YNc(10,ot,4,3,"div",26),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,4,"FREQUENCY"),""),e.xp6(4),e.hij("--",e.lcZ(8,6,"NONE"),"--"),e.xp6(2),e.Q6J("ngForOf",t.reminderFrequencies),e.xp6(1),e.Q6J("ngIf",null==t.reminderForm.get("frequency").errors?null:t.reminderForm.get("frequency").errors.required)}}function st(i,r){if(1&i&&(e.TgZ(0,"div",35),e.ynx(1,36),e.TgZ(2,"mat-checkbox",37),e._uU(3),e.qZA(),e.BQk(),e.qZA()),2&i){const t=r.$implicit,n=r.index;e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.hij(" ",t.controls.name.value," ")}}function dt(i,r){if(1&i&&(e.TgZ(0,"div",31)(1,"label",32),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",33),e.YNc(5,st,4,2,"div",34),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAYS")),e.xp6(3),e.Q6J("ngForOf",t.dailyRemindersArray.controls)}}function mt(i,r){if(1&i&&(e.TgZ(0,"mat-radio-button",42),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function ct(i,r){if(1&i&&(e.TgZ(0,"div",31)(1,"label",38),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",39)(5,"mat-radio-group",40),e.YNc(6,mt,2,2,"mat-radio-button",41),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"WEEK_DAYS")),e.xp6(4),e.Q6J("ngForOf",t.dayOfWeek)}}function lt(i,r){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function ut(i,r){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function pt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,36),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",48),e.NdJ("change",function(){const a=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.onDateChange(a))}),e.YNc(6,lt,2,2,"option",25),e.qZA()(),e.TgZ(7,"td")(8,"select",49),e.NdJ("change",function(){const a=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.onDateChange(a))}),e.YNc(9,ut,2,2,"option",25),e.qZA()(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.controls.name.value),e.xp6(3),e.Q6J("ngForOf",t.controls.monthValues.value),e.xp6(3),e.Q6J("ngForOf",o.days)}}function ht(i,r){if(1&i&&(e.TgZ(0,"div",31)(1,"label",43),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",44)(5,"table",45)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",46),e.YNc(16,pt,10,4,"tr",47),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_QUARTER_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"DAY")),e.xp6(3),e.Q6J("ngForOf",t.quarterlyRemindersArray.controls)}}function _t(i,r){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function gt(i,r){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ft(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.ynx(1,36),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td")(5,"select",48),e.NdJ("change",function(){const a=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.onDateChange(a))}),e.YNc(6,_t,2,2,"option",25),e.qZA()(),e.TgZ(7,"td")(8,"select",49),e.NdJ("change",function(){const a=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.onDateChange(a))}),e.YNc(9,gt,2,2,"option",25),e.qZA()(),e.BQk(),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw(3);e.xp6(1),e.Q6J("formGroupName",n),e.xp6(2),e.Oqu(t.controls.name.value),e.xp6(3),e.Q6J("ngForOf",t.controls.monthValues.value),e.xp6(3),e.Q6J("ngForOf",o.days)}}function vt(i,r){if(1&i&&(e.TgZ(0,"div",31)(1,"label",50),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",51)(5,"table",45)(6,"thead")(7,"tr"),e._UZ(8,"th"),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"tbody",52),e.YNc(16,ft,10,4,"tr",47),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,4,"SELECT_DATE")),e.xp6(8),e.Oqu(e.lcZ(11,6,"MONTH")),e.xp6(3),e.Oqu(e.lcZ(14,8,"DAY")),e.xp6(3),e.Q6J("ngForOf",t.halfYearlyRemindersArray.controls)}}function yt(i,r){if(1&i&&(e.TgZ(0,"div",6)(1,"div",29),e.YNc(2,dt,6,4,"div",30),e.YNc(3,ct,7,4,"div",30),e.YNc(4,ht,17,10,"div",30),e.YNc(5,vt,17,10,"div",30),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf","0"==t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","1"==t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","3"==t.reminderForm.get("frequency").value),e.xp6(1),e.Q6J("ngIf","4"==t.reminderForm.get("frequency").value)}}function Zt(i,r){if(1&i&&(e.TgZ(0,"div",21)(1,"label",22),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",53)(5,"owl-date-time",null,54),e.qZA()),2&i){const t=e.MAs(6),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,4,"REMINDER_DATE"),""),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t)}}function Tt(i,r){if(1&i&&(e.TgZ(0,"div",21)(1,"label",22),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",55)(5,"owl-date-time",null,56),e.qZA()),2&i){const t=e.MAs(6),n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,4,"REMINDER_START_DATE"),""),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("min",n.minDate)("owlDateTime",t)}}function Dt(i,r){if(1&i&&(e.TgZ(0,"div",21)(1,"label",22),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"input",57)(5,"owl-date-time",null,58),e.qZA()),2&i){const t=e.MAs(6);e.xp6(2),e.Oqu(e.lcZ(3,3,"REMINDER_END_DATE")),e.xp6(2),e.Q6J("owlDateTimeTrigger",t)("owlDateTime",t)}}function At(i,r){1&i&&(e.TgZ(0,"div",59),e._UZ(1,"mat-spinner"),e.qZA())}let xt=(()=>{class i extends D.H{constructor(t,n,o,a){super(),this.fb=t,this.commonService=n,this.data=o,this.dialogRef=a,this.reminderFrequencies=[],this.minDate=new Date,this.users=[],this.selectedUsers=[],this.isLoading=!1,this.dayOfWeek=[{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}],this.months=[{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}],this.days=[]}get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}ngOnInit(){for(let t=1;t<=31;t++)this.days.push(t);this.getReminderFrequency(),this.createReminderForm(),this.getReminder()}closeDialog(){this.dialogRef.close()}getReminder(){this.sub$.sink=this.commonService.getReminder(this.data).subscribe(t=>{this.reminder=Object.assign({},t),this.reminderForm.patchValue(this.reminder),this.onFrequencyChange(),this.reminderForm.patchValue(this.reminder),this.reminderForm.get("isRepeated").value&&(this.reminderForm.get("frequency").setValidators([m.kI.required]),this.reminderForm.updateValueAndValidity())})}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(t=>this.reminderFrequencies=[...t])}createReminderForm(){var t=new Date;this.reminderForm=this.fb.group({id:[""],subject:[{value:"",disabled:!0},[m.kI.required]],message:[{value:"",disabled:!0},[m.kI.required]],frequency:[{value:"",disabled:!0}],isRepeated:[{value:!1,disabled:!0}],isEmailNotification:[{value:!1,disabled:!0}],startDate:[{value:t,disabled:!0},[m.kI.required]],endDate:[{value:null,disabled:!0}],dayOfWeek:[{value:2,disabled:!0}],documentId:[{value:null,disabled:!0}]})}checkData(t){t.checked?this.reminderForm.get("frequency").setValidators([m.kI.required]):this.reminderForm.get("frequency").setValidators([]),this.reminderForm.updateValueAndValidity()}getUsers(){this.sub$.sink=this.commonService.getUsers().subscribe(t=>{if(this.users=t,this.reminder){const n=this.reminder.reminderUsers.map(o=>o.userId);this.selectedUsers=this.users.filter(o=>n.indexOf(o.id)>=0)}})}onFrequencyChange(){let t=this.reminderForm.get("frequency").value;t=0==t?"0":t,t==g.D.Daily.toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==g.D.Weekly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(2)):t==g.D.Quarterly.toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):t==g.D.HalfYearly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){var t=this.fb.array([]);t.push(this.createDailyReminderFormGroup(p.e.Sunday)),t.push(this.createDailyReminderFormGroup(p.e.Monday)),t.push(this.createDailyReminderFormGroup(p.e.Tuesday)),t.push(this.createDailyReminderFormGroup(p.e.Wednesday)),t.push(this.createDailyReminderFormGroup(p.e.Thursday)),t.push(this.createDailyReminderFormGroup(p.e.Friday)),t.push(this.createDailyReminderFormGroup(p.e.Saturday)),this.reminderForm.addControl("dailyReminders",t)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){var t=this.fb.array([]),n=this.months.filter(l=>[1,2,3].indexOf(l.id)>=0),o=this.months.filter(l=>[4,5,6].indexOf(l.id)>=0),a=this.months.filter(l=>[7,8,9].indexOf(l.id)>=0),d=this.months.filter(l=>[10,11,12].indexOf(l.id)>=0);t.push(this.createQuarterlyReminderFormGroup(h.y.Quarter1,"Jan - Mar",n)),t.push(this.createQuarterlyReminderFormGroup(h.y.Quarter2,"Apr - Jun",o)),t.push(this.createQuarterlyReminderFormGroup(h.y.Quarter3,"Jul - Sept",a)),t.push(this.createQuarterlyReminderFormGroup(h.y.Quarter4,"Oct - Dec",d)),this.reminderForm.addControl("quarterlyReminders",t)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){var t=this.fb.array([]),n=this.months.filter(a=>[1,2,3,4,5,6].indexOf(a.id)>=0),o=this.months.filter(a=>[7,8,9,10,11,13].indexOf(a.id)>=0);t.push(this.createHalfYearlyReminderFormGroup(h.y.Quarter1,"Jan - Jun",n)),t.push(this.createHalfYearlyReminderFormGroup(h.y.Quarter2,"Jul - Dec",o)),this.reminderForm.addControl("halfYearlyReminders",t)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(t){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[t],isActive:[!0],name:[p.e[t]]})}createQuarterlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[this.getCurrentDay()],month:[o[0]],name:[n],monthValues:[o]})}createHalfYearlyReminderFormGroup(t,n,o){return this.fb.group({id:[""],reminderId:[""],quarter:[t],day:[this.getCurrentDay()],month:[o[0]],name:[n],monthValues:[o]})}getCurrentDay(){return(new Date).getDate()}onDateChange(t){const n=t.get("day").value,o=t.get("month").value;n>new Date((new Date).getFullYear(),Number.parseInt(o),0).getDate()&&(t.setErrors({invalidDate:"Invalid Date"}),t.markAllAsTouched())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.QS),e.Y36(A.v),e.Y36(_.WI),e.Y36(_.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-reminder"]],features:[e.qOj],decls:42,vars:22,consts:[[1,"dialog-header"],[1,"folder-dialog-info"],[1,"section-title"],[1,"close-icon","m-2","text-danger",3,"click"],[1,"material-icons","cursor-pointer"],[1,"d-content"],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject"],["formControlName","subject","type","text","id","subject",1,"form-control"],["for","message"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"col-md-2"],["color","primary","formControlName","isRepeated",3,"change"],["color","primary","formControlName","isEmailNotification"],[1,"col-md-4"],["class","row",4,"ngIf"],["class","form-group col-md-6",4,"ngIf"],["class","loading-shade",4,"ngIf"],[1,"form-group","col-md-6"],["for","frequency"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"text-danger"],[1,"col-md-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","weekDays"],["id","weekDays",1,"row"],["class","col-sm-auto mr-1","formArrayName","dailyReminders",4,"ngFor","ngForOf"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["class","mr-2","color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],[4,"ngFor","ngForOf"],["formControlName","month",1,"form-control",3,"change"],["formControlName","day",1,"form-control",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],["formControlName","startDate","placeholder","Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt2",""],["formControlName","startDate","placeholder","Start Date",1,"form-control",3,"owlDateTimeTrigger","min","owlDateTime"],["dt3",""],["formControlName","endDate","placeholder","End Date",1,"form-control",3,"owlDateTimeTrigger","owlDateTime"],["dt4",""],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(7,"span",4),e._uU(8," close "),e.qZA()()(),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"form",8)(13,"div",6)(14,"div",9)(15,"label",10),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",11),e.qZA()(),e.TgZ(19,"div",6)(20,"div",9)(21,"label",12),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"textarea",13),e.qZA()(),e.TgZ(25,"div",6)(26,"div",14)(27,"mat-checkbox",15),e.NdJ("change",function(a){return n.checkData(a)}),e._uU(28),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",14)(31,"mat-checkbox",16),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e._UZ(34,"div",17),e.qZA(),e.YNc(35,at,11,8,"div",18),e.YNc(36,yt,6,4,"div",18),e.TgZ(37,"div",6),e.YNc(38,Zt,7,6,"div",19),e.YNc(39,Tt,7,6,"div",19),e.YNc(40,Dt,7,5,"div",19),e.qZA()()()(),e.YNc(41,At,2,0,"div",20),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,12,"REMINDER_DETAIL")),e.xp6(8),e.Q6J("formGroup",n.reminderForm),e.xp6(4),e.hij(" ",e.lcZ(17,14,"SUBJECT"),""),e.xp6(6),e.hij(" ",e.lcZ(23,16,"MESSAGE"),""),e.xp6(6),e.hij(" ",e.lcZ(29,18,"REPEATE_REMINDER")," "),e.xp6(4),e.Oqu(e.lcZ(33,20,"SEND_EMAIL")),e.xp6(3),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(2),e.Q6J("ngIf",!n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.reminderForm.get("isRepeated").value),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[u.sg,u.O5,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.sg,m.u,m.x0,m.CE,x.Ou,I.oG,f.sZ,f.BO,f.hV,R.VQ,R.U0,C.X$]}),i})();var Rt=s(2654);class Ct{constructor(r){this.commonService=r,this._reminderSubject$=new y.X([]),this._responseHeaderSubject$=new y.X(null),this.loadingSubject=new y.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this._responseHeaderSubject$.asObservable()}get count(){return this._count}connect(){return this.sub$=new Rt.w,this._reminderSubject$.asObservable()}disconnect(){this._reminderSubject$.complete(),this.loadingSubject.complete(),this.sub$.unsubscribe()}loadData(r){this.loadingSubject.next(!0),this.sub$=this.commonService.getAllRemindersForCurrentUser(r).pipe((0,Y.K)(()=>(0,M.of)([])),(0,k.x)(()=>this.loadingSubject.next(!1))).subscribe(t=>{if(t&&t.headers.get("X-Pagination")){const n=JSON.parse(t.headers.get("X-Pagination"));this._responseHeaderSubject$.next(n)}if(t){const n=[...t.body];this._count=n.length,this._reminderSubject$.next(n)}})}}var bt=s(5485),c=s(2075),Ft=s(1615),qt=s(8475);function Nt(i,r){1&i&&e._UZ(0,"th",27)}function Lt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",28)(1,"button",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onDetail(a))}),e._UZ(2,"i",30),e.qZA(),e._uU(3," \xa0\xa0 "),e.TgZ(4,"button",31),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.deleteReminder(a))}),e._UZ(5,"i",32),e.qZA()()}}function Et(i,r){1&i&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DOCUMENT")," "))}function St(i,r){if(1&i&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.documentName," ")}}function Ut(i,r){1&i&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"START_DATE")," "))}function Yt(i,r){if(1&i&&(e.TgZ(0,"td",28),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.startDate,"dd/MM/yyyy hh:mm:ss")," ")}}function It(i,r){1&i&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"END_DATE")," "))}function Qt(i,r){if(1&i&&(e.TgZ(0,"td",28),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.endDate,"dd/MM/yyyy hh:mm:ss")," ")}}function Ot(i,r){1&i&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SUBJECT")," "))}function Jt(i,r){if(1&i&&(e.TgZ(0,"td",28),e._uU(1),e.ALo(2,"limitTo"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.subject,100)," ")}}function wt(i,r){1&i&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MESSAGE")," "))}function jt(i,r){if(1&i&&(e.TgZ(0,"td",28),e._uU(1),e.ALo(2,"limitTo"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.message,150)," ")}}function Mt(i,r){1&i&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FREQUENCY")," "))}function kt(i,r){if(1&i&&(e.TgZ(0,"td",28),e._uU(1),e.ALo(2,"frequency"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.frequency)," ")}}const $t=function(){return[15,20,30]};function Gt(i,r){if(1&i&&(e.TgZ(0,"td",34),e._UZ(1,"mat-paginator",35),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("length",t.reminderResource.totalCount)("pageSize",t.reminderResource.pageSize)("pageSizeOptions",e.DdM(3,$t))}}function Ht(i,r){1&i&&e._UZ(0,"tr",36)}function Vt(i,r){1&i&&e._UZ(0,"tr",37)}function Bt(i,r){1&i&&e._UZ(0,"tr",38)}function Wt(i,r){1&i&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",39)(3,"label",40),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.BQk()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"NO_DATA_FOUND"),""))}function zt(i,r){1&i&&(e.TgZ(0,"div",41),e._UZ(1,"mat-spinner"),e.qZA())}let Kt=(()=>{class i extends D.H{constructor(t,n,o,a,d,l){super(),this.dialog=t,this.commonService=n,this.commonDialogService=o,this.toastrService=a,this.dialogRef=d,this.translationService=l,this.reminders=[],this.reminderFrequencies=[],this.displayedColumns=["action","documentName","startDate","endDate","subject","message","frequency"],this.footerToDisplayed=["footer"],this.isLoadingResults=!0,this.filterObservable$=new nt.xQ,this.reminderResource=new it.t,this.reminderResource.pageSize=15,this.reminderResource.orderBy="startDate desc"}get SubjectFilter(){return this._subjectFilter}set SubjectFilter(t){this._subjectFilter=t,this.filterObservable$.next(`subject:${t}`)}set FrequencyFilter(t){this._frequencyFilter="0"==t?"0":t?t.toString():"",this.filterObservable$.next(`frequency:${this._frequencyFilter}`)}get FrequencyFilter(){return this._frequencyFilter}get MessageFilter(){return this._messageFilter}set MessageFilter(t){this._messageFilter=t,this.filterObservable$.next(`message:${t}`)}ngOnInit(){this.getReminderFrequency(),this.dataSource=new Ct(this.commonService),this.dataSource.loadData(this.reminderResource),this.sub$.sink=this.filterObservable$.pipe((0,S.b)(1e3),(0,U.x)()).subscribe(t=>{this.reminderResource.skip=0;const n=t.split(":");"subject"===n[0]?this.reminderResource.subject=escape(n[1]):"message"===n[0]?this.reminderResource.message=n[1]:"frequency"===n[0]&&(this.reminderResource.frequency=n[1]),this.dataSource.loadData(this.reminderResource)})}ngAfterViewInit(){this.sub$.sink=this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,w.T)(this.sort.sortChange,this.paginator.page).pipe((0,q.b)(t=>{this.reminderResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.reminderResource.pageSize=this.paginator.pageSize,this.reminderResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadData(this.reminderResource)})).subscribe()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(t=>this.reminderFrequencies=[...t])}closeDialog(){this.dialogRef.close()}deleteReminder(t){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(n=>{n&&(this.isLoadingResults=!0,this.commonService.deleteReminderCurrentUser(t.id).subscribe(()=>{this.isLoadingResults=!1,this.toastrService.success(this.translationService.getValue("REMINDER_DELETED_SUCCESSFULLY")),this.dataSource.loadData(this.reminderResource)},()=>this.isLoadingResults=!1))})}onDetail(t){this.dialog.open(xt,{data:t.id,width:"80vw",height:"80vh"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.uw),e.Y36(A.v),e.Y36(bt.V),e.Y36(N._W),e.Y36(_.so),e.Y36(L.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reminder-list"]],viewQuery:function(t,n){if(1&t&&(e.Gf(T.NW,5),e.Gf(v.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first)}},features:[e.qOj],decls:43,vars:11,consts:[[1,"dialog-header"],[1,"folder-dialog-info"],[1,"section-title"],[1,"close-icon","mt-1","ml-2","text-danger",3,"click"],[1,"material-icons","cursor-pointer"],[1,"d-content"],[1,"row"],[1,"col-sm-12"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","documentName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","subject"],["matColumnDef","message"],["matColumnDef","frequency"],["matColumnDef","footer"],["mat-footer-cell","","colspan","7",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],[4,"ngIf"],["class","loading-shade",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"las","la-eye"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"las","la-trash"],["mat-header-cell","","mat-sort-header",""],["mat-footer-cell","","colspan","7"],[3,"length","pageSize","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[1,"col-sm-12","ml-4","mt-3"],[1,"font-weight-bold"],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(7,"span",4),e._uU(8," close "),e.qZA()()(),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"table",9),e.ynx(14,10),e.YNc(15,Nt,1,0,"th",11),e.YNc(16,Lt,6,0,"td",12),e.BQk(),e.ynx(17,13),e.YNc(18,Et,3,3,"th",14),e.YNc(19,St,2,1,"td",12),e.BQk(),e.ynx(20,15),e.YNc(21,Ut,3,3,"th",14),e.YNc(22,Yt,3,4,"td",12),e.BQk(),e.ynx(23,16),e.YNc(24,It,3,3,"th",14),e.YNc(25,Qt,3,4,"td",12),e.BQk(),e.ynx(26,17),e.YNc(27,Ot,3,3,"th",14),e.YNc(28,Jt,3,4,"td",12),e.BQk(),e.ynx(29,18),e.YNc(30,wt,3,3,"th",14),e.YNc(31,jt,3,4,"td",12),e.BQk(),e.ynx(32,19),e.YNc(33,Mt,3,3,"th",14),e.YNc(34,kt,3,3,"td",12),e.BQk(),e.ynx(35,20),e.YNc(36,Gt,2,4,"td",21),e.BQk(),e.YNc(37,Ht,1,0,"tr",22),e.YNc(38,Vt,1,0,"tr",23),e.YNc(39,Bt,1,0,"tr",24),e.qZA(),e.YNc(40,Wt,6,3,"ng-container",25),e.qZA()()()(),e.YNc(41,zt,2,0,"div",26),e.ALo(42,"async")),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,7,"REMINDERS")),e.xp6(9),e.Q6J("dataSource",n.dataSource),e.xp6(24),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("matFooterRowDef",n.footerToDisplayed),e.xp6(1),e.Q6J("ngIf",0===n.dataSource.count),e.xp6(1),e.Q6J("ngIf",e.lcZ(42,9,n.dataSource.loading$)))},dependencies:[u.O5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.mD,c.Ke,c.ge,c.ev,c.yh,c.XQ,c.Gk,c.Q2,x.Ou,v.YE,v.nU,T.NW,u.Ov,u.uU,C.X$,Ft.W,qt.y]}),i})();var Pt=s(775),Xt=s(493),ei=s(8032);let ti=(()=>{class i{constructor(t,n){this.httpClient=t,this.commonHttpErrorService=n}getDocuments(t){const o=(new Z.LE).set("Fields",t.fields).set("OrderBy",t.orderBy).set("PageSize",t.pageSize.toString()).set("Skip",t.skip.toString()).set("SearchQuery",t.searchQuery).set("categoryId",t.categoryId).set("name",t.name).set("metaTags",t.metaTags).set("id",t.id.toString());return this.httpClient.get("DocumentLibraries",{params:o,observe:"response"}).pipe((0,Y.K)(this.commonHttpErrorService.handleError))}getDocumentLibrary(t){return this.httpClient.get("document/"+t)}getDocumentViewLibrary(t){return this.httpClient.get("document/view/"+t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Z.eN),e.LFG(ei.U))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ii=s(1218),ni=s(8265),ri=s(914),oi=s(9785),V=s(7531),B=s(5245),E=s(2181);const ai=["input"],si=["metatag"];function di(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onAddDocument())}),e._UZ(1,"i",34),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ADD_DOCUMENT")," "))}function mi(i,r){1&i&&(e.TgZ(0,"div",35),e._UZ(1,"mat-spinner"),e.qZA())}function ci(i,r){if(1&i&&(e.TgZ(0,"div")(1,"b"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.name,"")}}function li(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}const ui=function(i){return{"margin-left.px":i}};function pi(i,r){if(1&i&&(e.TgZ(0,"mat-option",17)(1,"div",36),e.YNc(2,ci,3,1,"div",37),e.YNc(3,li,2,1,"div",37),e.qZA()()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Q6J("ngStyle",e.VKq(4,ui,20*t.deafLevel)),e.xp6(1),e.Q6J("ngIf",!t.parentId),e.xp6(1),e.Q6J("ngIf",t.parentId)}}function hi(i,r){1&i&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij("",e.lcZ(2,1,"ACTION")," "))}function _i(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",39)(1,"button",40),e._UZ(2,"i",41),e.qZA(),e.TgZ(3,"mat-menu",null,42)(5,"button",43),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onDocumentView(a))}),e.TgZ(6,"mat-icon"),e._uU(7,"visibility"),e.qZA(),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",43),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.addComment(a))}),e.TgZ(11,"mat-icon"),e._uU(12," chat"),e.qZA(),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"button",43),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.addReminder(a))}),e.TgZ(16,"mat-icon"),e._uU(17,"notifications"),e.qZA(),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"button",44),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onVersionHistoryClick(a))}),e.TgZ(21,"mat-icon"),e._uU(22," history"),e.qZA(),e._uU(23),e.ALo(24,"translate"),e.qZA()()()}if(2&i){const t=e.MAs(4);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(7),e.hij(" ",e.lcZ(9,5,"VIEW")," "),e.xp6(5),e.hij(" ",e.lcZ(14,7,"COMMENT")," "),e.xp6(5),e.hij(" ",e.lcZ(19,9,"ADD_REMINDER")," "),e.xp6(5),e.hij(" ",e.lcZ(24,11,"VERSION_HISOTRY")," ")}}function gi(i,r){1&i&&(e.TgZ(0,"th",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NAME")," "))}function fi(i,r){if(1&i&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function vi(i,r){1&i&&(e.TgZ(0,"th",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CATEGORY_NAME")," "))}function yi(i,r){if(1&i&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t.categoryName," ")}}function Zi(i,r){1&i&&(e.TgZ(0,"th",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CREATED_DATE")," "))}function Ti(i,r){if(1&i&&(e.TgZ(0,"td",39),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t?null:t.createdDate,"dd/MM/yyyy")," ")}}function Di(i,r){1&i&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EXPIRED_DATE")," "))}function Ai(i,r){if(1&i&&(e.TgZ(0,"td",46),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,null==t?null:t.expiredDate,"dd/MM/yyyy")," ")}}function xi(i,r){1&i&&(e.TgZ(0,"th",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CREATED_BY")," "))}function Ri(i,r){if(1&i&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.createdBy," ")}}function Ci(i,r){1&i&&e._UZ(0,"tr",47)}function bi(i,r){1&i&&e._UZ(0,"tr",48)}const Fi=function(){return[10,20,30]},qi=[{path:"",component:(()=>{class i extends D.H{constructor(t,n,o,a,d,l,b,F,Ii){super(),this.documentLibraryService=t,this.categoryService=n,this.overlay=o,this.clonerService=a,this.documentService=d,this.translationService=l,this.commonService=b,this.toastrService=F,this.dialog=Ii,this.documents=[],this.displayedColumns=["action","name","categoryName","createdDate","expiredDate","createdBy"],this.isLoadingResults=!0,this.categories=[],this.allCategories=[],this.selection=new K.Ov(!0,[]),this.documentResource=new W.J,this.documentResource.pageSize=10,this.documentResource.orderBy="CreatedDate desc"}ngOnInit(){this.dataSource=new z(this.documentLibraryService),this.dataSource.loadDocuments(this.documentResource),this.getCategories(),this.getResourceParameter()}ngAfterViewInit(){this.sub$.sink=this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,w.T)(this.sort.sortChange,this.paginator.page).pipe((0,q.b)(()=>{this.documentResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.documentResource.pageSize=this.paginator.pageSize,this.documentResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadDocuments(this.documentResource)})).subscribe(),this.sub$.sink=(0,j.R)(this.input.nativeElement,"keyup").pipe((0,S.b)(1e3),(0,U.x)(),(0,q.b)(()=>{this.paginator.pageIndex=0,this.documentResource.name=this.input.nativeElement.value,this.dataSource.loadDocuments(this.documentResource)})).subscribe(),this.sub$.sink=(0,j.R)(this.metatag.nativeElement,"keyup").pipe((0,S.b)(1e3),(0,U.x)(),(0,q.b)(()=>{this.paginator.pageIndex=0,this.documentResource.metaTags=this.metatag.nativeElement.value,this.dataSource.loadDocuments(this.documentResource)})).subscribe()}onCategoryChange(t){this.documentResource.categoryId=t.value?t.value:"",this.documentResource.skip=0,this.dataSource.loadDocuments(this.documentResource)}getCategories(){this.categoryService.getAllCategoriesForDropDown().subscribe(t=>{this.categories=t,this.setDeafLevel()})}setDeafLevel(t,n){const o=this.categories.filter(a=>a.parentId==n);return o.length>0&&o.map((a,d)=>{a.deafLevel=t?t.deafLevel+1:0,a.index=(t?t.index:0)+d*Math.pow(.1,a.deafLevel),this.allCategories.push(a),this.setDeafLevel(a,a.id)}),t}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(t=>{t&&(this.documentResource.pageSize=t.pageSize,this.documentResource.skip=t.skip,this.documentResource.totalCount=t.totalCount)})}getDocuments(){this.isLoadingResults=!0,this.sub$.sink=this.documentLibraryService.getDocuments(this.documentResource).subscribe(t=>{const n=JSON.parse(t.headers.get("X-Pagination"));this.documentResource.pageSize=n.pageSize,this.documentResource.skip=n.skip,this.documents=[...t.body],this.isLoadingResults=!1},()=>this.isLoadingResults=!1)}addReminder(t){this.dialog.open(Ye,{data:t,width:"80vw",height:"80vh"})}onReminderList(){this.dialog.open(Kt,{data:null,width:"80vw",height:"80vh"})}onAddDocument(){const t=this.dialog.open(tt,{data:null,width:"80vw",height:"80vh"});this.sub$.sink=t.afterClosed().subscribe(n=>{n&&this.dataSource.loadDocuments(this.documentResource)})}onDocumentView(t){const o=t.url.split(".")[1];this.overlay.open(P.Y,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:{documentId:t.id,name:t.name,extension:o,isRestricted:t.isAllowDownload,isVersion:!1,isFromPreview:!1}})}addDocumentTrail(t,n){this.sub$.sink=this.commonService.addDocumentAuditTrail({documentId:t,operationName:n}).subscribe(a=>{})}downloadFile(t,n){const o=new Blob([t.body],{type:t.body.type}),a=document.createElement("a");a.setAttribute("style","display:none;"),document.body.appendChild(a),a.download=n.name,a.href=URL.createObjectURL(o),a.target="_blank",a.click(),document.body.removeChild(a)}addComment(t){const n=this.dialog.open(Pt.L,{width:"800px",maxHeight:"70vh",data:Object.assign({},t)});this.sub$.sink=n.afterClosed().subscribe(o=>{"loaded"===o&&this.dataSource.loadDocuments(this.documentResource)})}onVersionHistoryClick(t){let o=this.clonerService.deepClone(t);this.sub$.sink=this.documentService.getDocumentVersion(t.id).subscribe(a=>{o.documentVersions=a,this.dialog.open(Xt.F,{width:"30vw",panelClass:"full-width-dialog",data:Object.assign(o,{isAssignUser:!0})})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ti),e.Y36($.H),e.Y36(ii.T),e.Y36(ni.$),e.Y36(ri.Z),e.Y36(L.D),e.Y36(A.v),e.Y36(N._W),e.Y36(_.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-document-library-list"]],viewQuery:function(t,n){if(1&t&&(e.Gf(T.NW,5),e.Gf(v.YE,5),e.Gf(ai,5),e.Gf(si,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first),e.iGM(o=e.CRH())&&(n.input=o.first),e.iGM(o=e.CRH())&&(n.metatag=o.first)}},features:[e.qOj],decls:59,vars:31,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"widget-title"],["class","btn btn-success btn-sm m-right-10",3,"click",4,"hasClaim"],[1,"btn","btn-danger","btn-sm","m-right-10",3,"click"],[1,"las","la-list"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"table-container"],[1,"row","m-2"],[1,"col-md-4"],["appearance","outline",1,"w-100"],["matInput","",3,"placeholder"],["input",""],["metatag",""],[3,"placeholder","selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",1,"mat-elevation-z8","table",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","categoryName"],["matColumnDef","createdDate"],["matColumnDef","expiredDate"],["class","text-danger","mat-cell","",4,"matCellDef"],["matColumnDef","createdBy"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],[1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-plus"],[1,"loading-shade"],[1,"country-item",3,"ngStyle"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["aria-label","Action",1,"btn","btn-sm","btn-primary",3,"matMenuTriggerFor"],[1,"las","la-ellipsis-v"],["menu","matMenu"],["mat-menu-item","","type","button",1,"btn","btn-light","btn-sm",3,"click"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"text-danger"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",1)(7,"h4",3),e.YNc(8,di,4,3,"button",4),e._uU(9," \xa0\xa0 "),e.TgZ(10,"button",5),e.NdJ("click",function(){return n.onReminderList()}),e._UZ(11,"i",6),e._uU(12),e.ALo(13,"translate"),e.qZA()()()(),e.TgZ(14,"div",7),e.YNc(15,mi,2,0,"div",8),e.ALo(16,"async"),e.TgZ(17,"div",9)(18,"div",10)(19,"div",11)(20,"mat-form-field",12),e._UZ(21,"input",13,14),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",11)(25,"mat-form-field",12),e._UZ(26,"input",13,15),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",11)(30,"mat-form-field",12)(31,"mat-select",16),e.NdJ("selectionChange",function(a){return n.onCategoryChange(a)}),e.ALo(32,"translate"),e.TgZ(33,"mat-option",17),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.YNc(36,pi,4,6,"mat-option",18),e.qZA()()()(),e.TgZ(37,"table",19),e.ynx(38,20),e.YNc(39,hi,3,3,"th",21),e.YNc(40,_i,25,13,"td",22),e.BQk(),e.ynx(41,23),e.YNc(42,gi,3,3,"th",24),e.YNc(43,fi,2,1,"td",22),e.BQk(),e.ynx(44,25),e.YNc(45,vi,3,3,"th",24),e.YNc(46,yi,2,1,"td",22),e.BQk(),e.ynx(47,26),e.YNc(48,Zi,3,3,"th",24),e.YNc(49,Ti,3,4,"td",22),e.BQk(),e.ynx(50,27),e.YNc(51,Di,3,3,"th",21),e.YNc(52,Ai,3,4,"td",28),e.BQk(),e.ynx(53,29),e.YNc(54,xi,3,3,"th",24),e.YNc(55,Ri,2,1,"td",22),e.BQk(),e.YNc(56,Ci,1,0,"tr",30),e.YNc(57,bi,1,0,"tr",31),e.qZA(),e._UZ(58,"mat-paginator",32),e.qZA()()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,16,"ASSIGNED_DOCUMENTS")),e.xp6(4),e.Q6J("hasClaim","assigned_documents_create_document"),e.xp6(4),e.hij(" ",e.lcZ(13,18,"MY_REMINDERS")," "),e.xp6(3),e.Q6J("ngIf",e.lcZ(16,20,n.dataSource.loading$)),e.xp6(6),e.s9C("placeholder",e.lcZ(23,22,"SEARCH_DOCUMENT_BY_NAME_OR_DESCRIPTION")),e.xp6(5),e.s9C("placeholder",e.lcZ(28,24,"SEARCH_DOCUMENT_BY_META_TAGS")),e.xp6(5),e.s9C("placeholder",e.lcZ(32,26,"SELECT_CATEGORY")),e.xp6(3),e.hij("-- ",e.lcZ(35,28,"NONE")," --"),e.xp6(2),e.Q6J("ngForOf",n.allCategories),e.xp6(1),e.Q6J("dataSource",n.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("length",n.documentResource.totalCount)("pageSize",n.documentResource.pageSize)("pageSizeOptions",e.DdM(30,Fi)))},dependencies:[u.sg,u.O5,u.PC,oi.d,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,x.Ou,G.KE,Q.gD,H.ey,v.YE,v.nU,T.NW,V.Nt,B.Hw,E.VK,E.OP,E.p6,u.Ov,u.uU,C.X$]}),i})()}];let Ni=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[J.Bz.forChild(qi),J.Bz]}),i})();var Li=s(2368),Ei=s(6845),Si=s(4586),Ui=s(7423);let Yi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,Ei.m,m.UX,Ni,c.p0,x.Cq,_.Is,Q.LD,Li.rP,v.JX,T.TU,V.c,I.p9,f.Ll,f.x,m.u5,Si.D,Ui.ot,B.Ps,R.Fk,E.Tx]}),i})()}}]);