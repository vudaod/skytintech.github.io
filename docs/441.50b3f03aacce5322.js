"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[441],{7954:(P,w,i)=>{i.d(w,{g:()=>d});var d=(()=>{return(a=d||(d={}))[a.Read=1]="Read",a[a.Created=2]="Created",a[a.Modified=3]="Modified",a[a.Deleted=4]="Deleted",a[a.Add_Permission=5]="Add_Permission",a[a.Remove_Permission=6]="Remove_Permission",a[a.Send_Email=7]="Send_Email",a[a.Download=8]="Download",d;var a})()},4913:(P,w,i)=>{i.d(w,{J:()=>a});var d=i(5519);class a extends d.r{constructor(){super(...arguments),this.id="",this.createdBy="",this.categoryId=""}}},914:(P,w,i)=>{i.d(w,{Z:()=>y});var d=i(520),a=i(7221),v=i(5e3),b=i(8032);let y=(()=>{class e{constructor(s,p){this.httpClient=s,this.commonHttpErrorService=p}updateDocument(s){return this.httpClient.put(`document/${s.id}`,s).pipe((0,a.K)(this.commonHttpErrorService.handleError))}addDocument(s){return this.httpClient.post("document",s).pipe((0,a.K)(this.commonHttpErrorService.handleError))}deleteDocument(s){return this.httpClient.delete(`document/${s}`).pipe((0,a.K)(this.commonHttpErrorService.handleError))}getDocument(s){return this.httpClient.get(`document/${s}`).pipe((0,a.K)(this.commonHttpErrorService.handleError))}getDocuments(s){const C=(new d.LE).set("Fields",s.fields).set("OrderBy",s.orderBy).set("createDateString",s.createDate?s.createDate.toString():"").set("PageSize",s.pageSize.toString()).set("Skip",s.skip.toString()).set("SearchQuery",s.searchQuery).set("categoryId",s.categoryId).set("name",s.name).set("metaTags",s.metaTags).set("id",s.id.toString());return this.httpClient.get("documents",{params:C,observe:"response"}).pipe((0,a.K)(this.commonHttpErrorService.handleError))}saveNewVersionDocument(s){return this.httpClient.post("documentVersion",s).pipe((0,a.K)(this.commonHttpErrorService.handleError))}getDocumentVersion(s){return this.httpClient.get(`documentversion/${s}`).pipe((0,a.K)(this.commonHttpErrorService.handleError))}restoreDocumentVersion(s,p){return this.httpClient.post(`documentversion/${s}/restore/${p}`,{}).pipe((0,a.K)(this.commonHttpErrorService.handleError))}getdocumentMetadataById(s){return this.httpClient.get(`document/${s}/getMetatag`).pipe((0,a.K)(this.commonHttpErrorService.handleError))}}return e.\u0275fac=function(s){return new(s||e)(v.LFG(d.eN),v.LFG(b.U))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6927:(P,w,i)=>{i.d(w,{Y:()=>te});var d=i(520),a=i(7954),v=i(2340),b=i(5854),y=i(2676),e=i(5e3),x=i(1218),s=i(690),p=i(8265),C=i(4786),D=i(2457),L=i(6107),_=i(9808),h=i(943),O=i(2313);function c(o,r){if(1&o&&(e.TgZ(0,"div",2),e._UZ(1,"img",3),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imageUrl,e.LSH)("alt",t.document.name)}}function u(o,r){1&o&&(e.TgZ(0,"div",4),e._UZ(1,"mat-spinner"),e.qZA())}let l=(()=>{class o extends y.H{constructor(t,n,m,f){super(),this.overlayRef=t,this.sanitizer=n,this.ref=m,this.commonService=f,this.isLoading=!1}ngOnInit(){}ngOnChanges(t){t.document&&this.getImage()}getImage(){this.isLoading=!0,this.sub$.sink=this.commonService.downloadDocument(this.document.documentId,this.document.isVersion).pipe((0,h.g)(500)).subscribe(t=>{if(this.isLoading=!1,t.type===d.dt.Response){const n=new Blob([t.body],{type:t.body.type});this.imageUrl=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(n)),this.ref.markForCheck()}},t=>{this.isLoading=!1})}onCancel(){this.overlayRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.L),e.Y36(O.H7),e.Y36(e.sBO),e.Y36(s.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-image-preview"]],inputs:{document:"document"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","center-img m-5",4,"ngIf"],["class","loading-shade",4,"ngIf"],[1,"center-img","m-5"],[1,"img-fluid",3,"src","alt"],[1,"loading-shade"]],template:function(t,n){1&t&&(e.YNc(0,c,2,2,"div",0),e.YNc(1,u,2,0,"div",1)),2&t&&(e.Q6J("ngIf",n.imageUrl),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[_.O5],styles:[".center-img[_ngcontent-%COMP%]{text-align:center}"]}),o})();var g=i(5363);function S(o,r){1&o&&(e.TgZ(0,"div",3)(1,"div",4),e._UZ(2,"pdf-toggle-sidebar")(3,"pdf-page-number")(4,"pdf-zoom-out")(5,"pdf-zoom-in")(6,"pdf-zoom-dropdown")(7,"pdf-rotate-page"),e.TgZ(8,"div",5),e._UZ(9,"pdf-toggle-secondary-toolbar"),e.qZA()()()),2&o&&(e.xp6(1),e.ekj("invisible",!1))}function T(o,r){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"mat-spinner"),e.qZA())}let B=(()=>{class o extends y.H{constructor(t){super(),this.commonService=t,this.loadingTime=2e3,this.documentUrl=null,this.isLoading=!1}ngOnChanges(t){t.document&&this.getDocument()}getDocument(){this.isLoading=!0,this.sub$.sink=this.commonService.downloadDocument(this.document.documentId,this.document.isVersion).subscribe(t=>{t.type===d.dt.Response&&(this.isLoading=!1,this.downloadFile(t))},t=>{this.isLoading=!1})}downloadFile(t){this.documentUrl=new Blob([t.body],{type:t.body.type})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-pdf-viewer"]],inputs:{document:"document"},features:[e.qOj,e.TTD],decls:4,vars:19,consts:[["height","91vh",3,"src","showToolbar","showSidebarButton","showFindButton","showPagingButtons","showZoomButtons","showPresentationModeButton","showOpenFileButton","showPrintButton","showDownloadButton","showBookmarkButton","showSecondaryToolbarButton","showRotateButton","showHandToolButton","showScrollingButton","showSpreadButton","showPropertiesButton","useBrowserLocale"],["customCheckboxZoomToolbar",""],["class","loading-shade",4,"ngIf"],["id","toolbarViewer"],["id","toolbarViewerMiddle"],[1,"float:right"],[1,"loading-shade"]],template:function(t,n){1&t&&(e._UZ(0,"ngx-extended-pdf-viewer",0),e.YNc(1,S,10,2,"ng-template",null,1,e.W1O),e.YNc(3,T,2,0,"div",2)),2&t&&(e.Q6J("src",n.documentUrl)("showToolbar",!0)("showSidebarButton",!0)("showFindButton",!0)("showPagingButtons",!0)("showZoomButtons",!0)("showPresentationModeButton",!0)("showOpenFileButton",!1)("showPrintButton",!1)("showDownloadButton",!1)("showBookmarkButton",!1)("showSecondaryToolbarButton",!0)("showRotateButton",!0)("showHandToolButton",!0)("showScrollingButton",!0)("showSpreadButton",!1)("showPropertiesButton",!1)("useBrowserLocale",!1),e.xp6(3),e.Q6J("ngIf",n.isLoading))},dependencies:[_.O5,g.U2,g.Zu,g.nO,g.eE,g.ye,g.IS,g.mR,g.S3]}),o})();function I(o,r){if(1&o&&(e.TgZ(0,"pre"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t)}}function k(o,r){1&o&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.qZA())}function R(o,r){if(1&o&&(e.ynx(0),e.YNc(1,I,2,1,"pre",3),e.YNc(2,k,2,0,"div",3),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t)}}function U(o,r){1&o&&(e.TgZ(0,"div",4),e._UZ(1,"mat-spinner"),e.qZA())}let A=(()=>{class o extends y.H{constructor(t,n){super(),this.commonService=t,this.overlayRef=n,this.textLines=[],this.isLoading=!1}ngOnChanges(t){t.document&&this.readDocument()}readDocument(){this.isLoading=!0,this.sub$.sink=this.commonService.readDocument(this.document.documentId,this.document.isVersion).subscribe(t=>{this.isLoading=!1,this.textLines=t.result},t=>{this.isLoading=!1})}onCancel(){this.overlayRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.v),e.Y36(C.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-text-preview"]],inputs:{document:"document"},features:[e.qOj,e.TTD],decls:3,vars:2,consts:[[1,"m-5","text-main-div"],[4,"ngFor","ngForOf"],["class","loading-shade",4,"ngIf"],[4,"ngIf"],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,R,3,2,"ng-container",1),e.qZA(),e.YNc(2,U,2,0,"div",2)),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.textLines),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[_.sg,_.O5],styles:[".text-div[_ngcontent-%COMP%]{word-wrap:break-word}.text-main-div[_ngcontent-%COMP%]{overflow:auto;height:75vh;background-color:#fff;padding:20px}pre[_ngcontent-%COMP%]{display:block;white-space:pre-wrap;word-wrap:break-word;margin:0;padding:0!important;font-size:1rem;font-family:inherit}"]}),o})();const Y=["iframe"];function F(o,r){1&o&&e._UZ(0,"iframe",3,4)}function V(o,r){1&o&&(e.TgZ(0,"div",5),e._UZ(1,"img",6),e.TgZ(2,"h5",7),e._uU(3,"Office View is not suporting the localhost please host your REST API and try again."),e.qZA()())}function M(o,r){1&o&&(e.TgZ(0,"div",8),e._UZ(1,"mat-spinner"),e.qZA())}let N=(()=>{class o extends y.H{constructor(t,n){super(),this.commonService=t,this.overlayRef=n,this.isLive=!0,this.isLoading=!1,this.token=""}ngOnInit(){v.N.apiUrl.indexOf("localhost")>=0&&(this.isLive=!1)}ngAfterViewInit(){this.isLive&&this.getDocumentToken()}getDocumentToken(){this.isLoading=!0,this.sub$.sink=this.commonService.getDocumentToken(this.document.documentId).subscribe(t=>{this.token=t.result;const n=location.host,m=location.protocol;this.iframe.nativeElement.src="https://view.officeapps.live.com/op/embed.aspx?src="+encodeURIComponent(`${"/"===v.N.apiUrl?`${m}//${n}/`:v.N.apiUrl}api/document/${this.document.documentId}/officeviewer?token=${this.token}&isVersion=${this.document.isVersion}`),this.isLoading=!1},t=>{this.isLoading=!1})}onCancel(){this.overlayRef.close()}ngOnDestroy(){this.sub$.sink=this.commonService.deleteDocumentToken(this.token).subscribe(()=>{}),super.ngOnDestroy()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.v),e.Y36(C.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-office-viewer"]],viewQuery:function(t,n){if(1&t&&e.Gf(Y,5),2&t){let m;e.iGM(m=e.CRH())&&(n.iframe=m.first)}},inputs:{document:"document"},features:[e.qOj],decls:3,vars:3,consts:[["class","preview-object","style","width: 100%;height: 100%;",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["class","loading-shade",4,"ngIf"],[1,"preview-object",2,"width","100%","height","100%"],["iframe",""],[2,"text-align","center"],["src","../../../assets/images/file-preview.png","alt","",1,"m-5"],[1,"text-light"],[1,"loading-shade"]],template:function(t,n){1&t&&(e.YNc(0,F,2,0,"iframe",0),e.YNc(1,V,4,0,"div",1),e.YNc(2,M,2,0,"div",2)),2&t&&(e.Q6J("ngIf",n.isLive),e.xp6(1),e.Q6J("ngIf",!n.isLive),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[_.O5]}),o})();const Q=["playerEl"];function J(o,r){1&o&&(e.TgZ(0,"div",4),e._UZ(1,"mat-spinner"),e.qZA())}let Z=(()=>{class o extends y.H{constructor(t,n){super(),this.overlayRef=t,this.commonService=n,this.isLoading=!1}ngOnChanges(t){t.document&&this.getDocument()}getDocument(){this.isLoading=!0,this.sub$.sink=this.commonService.downloadDocument(this.document.documentId,this.document.isVersion).subscribe(t=>{if(t.type===d.dt.Response){this.isLoading=!1,this.htmlSource&&this.player().hasChildNodes()&&this.player().removeChild(this.htmlSource);const n=new Blob([t.body],{type:t.body.type});this.htmlSource=document.createElement("source"),this.htmlSource.src=URL.createObjectURL(n),this.htmlSource.type=t.body.type,this.player().pause(),this.player().load(),this.player().appendChild(this.htmlSource),this.player().play()}},t=>{this.isLoading=!1})}player(){return this.playerEl.nativeElement}onCancel(){this.overlayRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.L),e.Y36(s.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-audio-preview"]],viewQuery:function(t,n){if(1&t&&e.Gf(Q,7),2&t){let m;e.iGM(m=e.CRH())&&(n.playerEl=m.first)}},inputs:{document:"document"},features:[e.qOj,e.TTD],decls:4,vars:1,consts:[[1,"audio-div"],["controls","controls"],["playerEl",""],["class","loading-shade",4,"ngIf"],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"audio",1,2),e.qZA(),e.YNc(3,J,2,0,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",n.isLoading))},dependencies:[_.O5],styles:[".audio-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;min-height:calc(100vh - 60px);background:rgba(15,15,15,.9490196078)}"]}),o})();function H(o,r){1&o&&(e.TgZ(0,"div",4),e._UZ(1,"mat-spinner"),e.qZA())}let $=(()=>{class o extends Z{constructor(t,n){super(t,n),this.overlayRef=t,this.commonService=n}ngOnChanges(t){t.document&&this.getDocument()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.L),e.Y36(s.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-video-preview"]],features:[e.qOj,e.TTD],decls:4,vars:1,consts:[[1,"video-div"],["controls","controls"],["playerEl",""],["class","loading-shade",4,"ngIf"],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"video",1,2),e.qZA(),e.YNc(3,H,2,0,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",n.isLoading))},dependencies:[_.O5],styles:[".video-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;min-height:calc(100vh - 60px);background:rgba(15,15,15,.9490196078)}video[_ngcontent-%COMP%]{width:65vw}"]}),o})();function j(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"span",8),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.downloadDocument(m.currentDoc))}),e._UZ(1,"i",9),e.qZA()}}function G(o,r){if(1&o&&e._UZ(0,"app-image-preview",10),2&o){const t=e.oxw();e.Q6J("document",t.currentDoc)}}function K(o,r){if(1&o&&e._UZ(0,"app-office-viewer",10),2&o){const t=e.oxw();e.Q6J("document",t.currentDoc)}}function z(o,r){if(1&o&&e._UZ(0,"app-pdf-viewer",10),2&o){const t=e.oxw();e.Q6J("document",t.currentDoc)}}function W(o,r){if(1&o&&e._UZ(0,"app-text-preview",10),2&o){const t=e.oxw();e.Q6J("document",t.currentDoc)}}function X(o,r){if(1&o&&e._UZ(0,"app-audio-preview",10),2&o){const t=e.oxw();e.Q6J("document",t.currentDoc)}}function q(o,r){if(1&o&&e._UZ(0,"app-video-preview",10),2&o){const t=e.oxw();e.Q6J("document",t.currentDoc)}}function ee(o,r){1&o&&(e.TgZ(0,"div",11),e._UZ(1,"mat-spinner"),e.qZA())}let te=(()=>{class o extends y.H{constructor(t,n,m,f,E,oe,ne){super(),this.overlay=t,this.commonService=n,this.data=m,this.clonerService=f,this.overlayRef=E,this.toastrService=oe,this.translationService=ne,this.type="",this.isLoading=!1,this.isDownloadFlag=!1}ngOnInit(){this.onDocumentView(this.data)}closeToolbar(){this.overlayRef.close()}onDocumentView(t){this.currentDoc=this.clonerService.deepClone(t);const m=v.N.allowExtesions.find(f=>f.extentions.find(E=>E===t.extension));this.type=m?m.type:"",this.getIsDownloadFlag(t),this.addDocumentTrail(t.isVersion?t.id:t.documentId,a.g.Read.toString())}addDocumentTrail(t,n){this.sub$.sink=this.commonService.addDocumentAuditTrail({documentId:t,operationName:n}).subscribe(f=>{})}getIsDownloadFlag(t){this.sub$.sink=this.commonService.isDownloadFlag(this.data.isVersion?t.id:t.documentId,this.data.isFromPreview).subscribe(n=>{this.isDownloadFlag=n})}downloadDocument(t){this.sub$.sink=this.commonService.downloadDocument(this.currentDoc.documentId,t.isVersion).subscribe(n=>{n.type===d.dt.Response&&(this.addDocumentTrail(t.isVersion?t.id:t.documentId,a.g.Download.toString()),this.downloadFile(n,t))},n=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))})}downloadFile(t,n){const m=new Blob([t.body],{type:t.body.type}),f=document.createElement("a");f.setAttribute("style","display:none;"),document.body.appendChild(f),f.download=this.data.name,f.href=URL.createObjectURL(m),f.target="_blank",f.click(),document.body.removeChild(f)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.T),e.Y36(s.v),e.Y36(b.p),e.Y36(p.$),e.Y36(C.L),e.Y36(D._W),e.Y36(L.D))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-base-preview"]],features:[e.qOj],decls:14,vars:10,consts:[[1,"file-preview-toolbar","d-flex"],[1,"back-arrow"],[1,"las","la-arrow-left",3,"click"],[1,"file-name","flex-grow-1"],["class","back-arrow",3,"click",4,"ngIf"],[3,"ngSwitch"],[3,"document",4,"ngSwitchCase"],["class","loading-shade",4,"ngIf"],[1,"back-arrow",3,"click"],[1,"las","la-arrow-down"],[3,"document"],[1,"loading-shade"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"span",1)(2,"i",2),e.NdJ("click",function(){return n.closeToolbar()}),e.qZA()(),e.TgZ(3,"span",3),e._uU(4),e.qZA(),e.YNc(5,j,2,0,"span",4),e.qZA(),e.ynx(6,5),e.YNc(7,G,1,1,"app-image-preview",6),e.YNc(8,K,1,1,"app-office-viewer",6),e.YNc(9,z,1,1,"app-pdf-viewer",6),e.YNc(10,W,1,1,"app-text-preview",6),e.YNc(11,X,1,1,"app-audio-preview",6),e.YNc(12,q,1,1,"app-video-preview",6),e.BQk(),e.YNc(13,ee,2,0,"div",7)),2&t&&(e.xp6(4),e.Oqu(null==n.currentDoc?null:n.currentDoc.name),e.xp6(1),e.Q6J("ngIf",n.isDownloadFlag),e.xp6(1),e.Q6J("ngSwitch",n.type),e.xp6(1),e.Q6J("ngSwitchCase","image"),e.xp6(1),e.Q6J("ngSwitchCase","office"),e.xp6(1),e.Q6J("ngSwitchCase","pdf"),e.xp6(1),e.Q6J("ngSwitchCase","text"),e.xp6(1),e.Q6J("ngSwitchCase","audio"),e.xp6(1),e.Q6J("ngSwitchCase","video"),e.xp6(1),e.Q6J("ngIf",n.isLoading))},dependencies:[_.O5,_.RF,_.n9,l,B,A,N,Z,$],styles:["[_nghost-%COMP%]     #aligner{display:none!important;visibility:hidden!important}.file-preview-toolbar[_ngcontent-%COMP%]{top:0;left:0;display:flex;width:100%;align-items:center;color:var(--be-accent-contrast);height:60px;padding:0 15px;background:#1976d2;z-index:10}.back-arrow[_ngcontent-%COMP%]{color:#fff;font-size:x-large;font-weight:700;cursor:pointer;margin-right:10px}.download-button[_ngcontent-%COMP%]{position:absolute;right:30px}.file-name[_ngcontent-%COMP%]{color:#fff;margin-left:10px}"]}),o})()},5854:(P,w,i)=>{i.d(w,{p:()=>a});const a=new(i(5e3).OlP)("OVERLAY_PANEL_DATA")},4786:(P,w,i)=>{i.d(w,{L:()=>b});var d=i(8929),a=i(2986);class b{constructor(e){this.overlayRef=e,this.id=function v(y=36){let e="",x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<y;s++)e+=x.charAt(Math.floor(Math.random()*x.length));return e}(15),this.value=new d.xQ}isOpen(){return this.overlayRef&&this.overlayRef.hasAttached()}close(){this.overlayRef&&this.overlayRef.dispose()}emitValue(e){this.value.next(e)}valueChanged(){return this.value.asObservable()}getPanelEl(){return this.overlayRef.overlayElement}updatePosition(){return this.overlayRef.updatePosition()}afterClosed(){return this.overlayRef.detachments().pipe((0,a.q)(1))}}},1218:(P,w,i)=>{i.d(w,{T:()=>_});var d=i(5e3),a=i(7429),v=i(4786),b=i(5854);class y{attach(){}enable(){document.documentElement.classList.add("be-fullscreen-overlay-scrollblock")}disable(){document.documentElement.classList.remove("be-fullscreen-overlay-scrollblock")}}var e=i(2198),x=i(1159),s=i(2845),p=i(5113),C=i(591);let D=(()=>{class h{constructor(c){this.breakpointObserver=c,this.isMobile$=new C.X(!1),this.isTablet$=new C.X(!1),this.breakpointObserver.observe(p.u3.Handset).subscribe(u=>{this.isMobile$.next(u.matches)}),this.breakpointObserver.observe(p.u3.Tablet).subscribe(u=>{this.isTablet$.next(u.matches)})}observe(c){return this.breakpointObserver.observe(c)}}return h.\u0275fac=function(c){return new(c||h)(d.LFG(p.Yg))},h.\u0275prov=d.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();const L={hasBackdrop:!0,closeOnBackdropClick:!0,panelClass:"overlay-panel"};let _=(()=>{class h{constructor(c,u,l){this.overlay=c,this.breakpoints=u,this.injector=l}open(c,u){const l=Object.assign({},L,u),g={positionStrategy:this.getPositionStrategy(l),hasBackdrop:l.hasBackdrop,panelClass:l.panelClass,backdropClass:l.backdropClass,scrollStrategy:this.getScrollStrategy(l),disposeOnNavigation:!0};l.width&&(g.width=l.width),l.height&&(g.height=l.height),l.maxHeight&&(g.maxHeight=l.maxHeight),l.maxWidth&&(g.maxWidth=l.maxWidth);const S=this.overlay.create(g),T=new v.L(S),B=c instanceof d.Rgc?new a.UE(c,l.viewContainerRef,l.data):new a.C5(c,l.viewContainerRef,this.createInjector(l,T));return T.componentRef=S.attach(B),l.closeOnBackdropClick&&(S.backdropClick().subscribe(()=>T.close()),S.keydownEvents().pipe((0,e.h)(I=>I.keyCode===x.hY)).subscribe(()=>T.close())),T}getScrollStrategy(c){return c.fullScreen?new y:"close"===c.scrollStrategy?this.overlay.scrollStrategies.close():null}createInjector(c,u){const l=new WeakMap;return l.set(v.L,u),l.set(b.p,c.data||null),new a.nK(this.injector,l)}getPositionStrategy(c){if(c.positionStrategy)return c.positionStrategy;const u=this.breakpoints.isMobile$.value&&c.mobilePosition||c.position;return"global"===c.origin||this.positionIsGlobal(u)?this.getGlobalPositionStrategy(u):this.getConnectedPositionStrategy(u,c.origin)}positionIsGlobal(c){return"center"===c||!Array.isArray(c)}getGlobalPositionStrategy(c){if("center"===c)return this.overlay.position().global().centerHorizontally().centerVertically();{const u=this.overlay.position().global();return Object.keys(c).forEach(l=>{u[l](c[l])}),u}}getConnectedPositionStrategy(c,u){return this.overlay.position().flexibleConnectedTo(u).withPositions(c).withPush(!0).withViewportMargin(5)}}return h.\u0275fac=function(c){return new(c||h)(d.LFG(s.aV),d.LFG(D),d.LFG(d.zs3))},h.\u0275prov=d.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);