"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[68],{2760:(y,g,n)=>{n.d(g,{c:()=>p});const p=[{id:0,name:"Daily"},{id:1,name:"Weekly"},{id:2,name:"Monthly"},{id:3,name:"Quarterly"},{id:4,name:"Half Yearly"},{id:5,name:"Yearly"}]},690:(y,g,n)=>{n.d(g,{v:()=>T});var d=n(520),p=n(1086),h=n(7221),v=n(2760),m=n(5e3),N=n(8032);let T=(()=>{class f{constructor(i,a){this.httpClient=i,this.commonHttpErrorService=a}getUsers(){return this.httpClient.get("user").pipe((0,h.K)(this.commonHttpErrorService.handleError))}getRoles(){return this.httpClient.get("role").pipe((0,h.K)(this.commonHttpErrorService.handleError))}getReminder(i){return this.httpClient.get(`reminder/${i}`).pipe((0,h.K)(this.commonHttpErrorService.handleError))}addDocumentAuditTrail(i){return this.httpClient.post("documentAuditTrail",i)}downloadDocument(i,a){return this.httpClient.get(`document/${i}/download?isVersion=${a}`,{reportProgress:!0,observe:"events",responseType:"blob"})}isDownloadFlag(i,a){return this.httpClient.get(`document/${i}/isDownloadFlag?isPermission=${a}`)}getDocumentToken(i){return this.httpClient.get(`documentToken/${i}/token`)}deleteDocumentToken(i){return this.httpClient.delete(`documentToken/${i}`)}readDocument(i,a){return this.httpClient.get(`document/${i}/readText?isVersion=${a}`)}getReminderFrequency(){return(0,p.of)(v.c)}addDocumentWithAssign(i){return this.httpClient.post("document/assign",i).pipe((0,h.K)(this.commonHttpErrorService.handleError))}getAllRemindersForCurrentUser(i){const u=(new d.LE).set("Fields",i.fields?i.fields:"").set("OrderBy",i.orderBy?i.orderBy:"").set("PageSize",i.pageSize.toString()).set("Skip",i.skip.toString()).set("SearchQuery",i.searchQuery?i.searchQuery:"").set("subject",i.subject?i.subject:"").set("message",i.message?i.message:"").set("frequency",i.frequency?i.frequency:"");return this.httpClient.get("reminder/all/currentuser",{params:u,observe:"response"})}deleteReminderCurrentUser(i){return this.httpClient.delete(`reminder/${i}/currentuser`)}}return f.\u0275fac=function(i){return new(i||f)(m.LFG(d.eN),m.LFG(N.U))},f.\u0275prov=m.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},6462:(y,g,n)=>{n.r(g),n.d(g,{NotificationModule:()=>ot});var d=n(9808),p=n(2784),h=n(319),v=n(6087),m=n(4847),N=n(4913),T=n(6787),f=n(3753),S=n(2868),i=n(13),a=n(5778),u=n(2676),x=n(591),Z=n(1086),E=n(7221),R=n(537);class b{constructor(s){this.notificationService=s,this.notificationsSubject=new x.X([]),this.responseHeaderSubject=new x.X(null),this.loadingSubject=new x.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}get count(){return this._count}connect(s){return this.notificationsSubject.asObservable()}disconnect(s){this.notificationsSubject.complete(),this.loadingSubject.complete()}loadNotifications(s){this.loadingSubject.next(!0),this.notificationService.getNotifications(s).pipe((0,E.K)(()=>(0,Z.of)([])),(0,R.x)(()=>this.loadingSubject.next(!1))).subscribe(o=>{const c=JSON.parse(o.headers.get("X-Pagination"));this.responseHeaderSubject.next(c);const r=[...o.body];this._count=r.length,this.notificationsSubject.next(r)})}}var L=n(6927),t=n(5e3),U=n(5769),O=n(1218),M=n(914),l=n(2075),A=n(773),j=n(7322),D=n(7531),I=n(2925);const _=["input"];function Y(e,s){1&e&&(t.TgZ(0,"div",21),t._UZ(1,"mat-spinner"),t.qZA())}function $(e,s){1&e&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION")," "))}function B(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(o);const r=t.oxw().$implicit,C=t.oxw();return t.KtG(C.viewDocument(r))}),t._UZ(1,"i",26),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"VIEW_DOCUMENT")," "))}function Q(e,s){if(1&e&&(t.TgZ(0,"td",23),t.YNc(1,B,4,3,"button",24),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Q6J("ngIf",o.documentId)}}function H(e,s){1&e&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DATE")," "))}function z(e,s){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.createdDate,"dd/MM/yyyy")," ")}}function F(e,s){1&e&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MESSAGE")," "))}function J(e,s){1&e&&(t.TgZ(0,"span",28),t._uU(1,"new"),t.qZA())}function w(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(2),t.hij(" ",o.documentName,""),t.xp6(1),t.hij(" ",t.lcZ(4,2,"DOCUMENT_PERMISSION_GRANTED_TO_YOU")," ")}}function G(e,s){if(1&e&&(t.TgZ(0,"ng-conatainer")(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.qZA()),2&e){const o=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,2,"DOCUMENT_NAME"),""),t.xp6(2),t.hij(" : ",o.documentName," :: ")}}function K(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," :: "),t.YNc(5,G,5,4,"ng-conatainer",19),t._uU(6),t.BQk()),2&e){const o=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"REMINDER")),t.xp6(3),t.Q6J("ngIf",o.documentId),t.xp6(1),t.hij(" ",o.message," ")}}function W(e,s){if(1&e&&(t.TgZ(0,"td",23),t.YNc(1,J,2,0,"span",27),t.YNc(2,w,5,4,"ng-container",19),t.YNc(3,K,7,5,"ng-container",19),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Q6J("ngIf",!o.isRead),t.xp6(1),t.Q6J("ngIf",!o.message),t.xp6(1),t.Q6J("ngIf",o.message)}}function P(e,s){1&e&&t._UZ(0,"tr",29)}function V(e,s){1&e&&t._UZ(0,"tr",30)}function X(e,s){1&e&&(t.ynx(0),t.TgZ(1,"div",6)(2,"div",31)(3,"label",32),t._uU(4),t.ALo(5,"translate"),t.qZA()()(),t.BQk()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"NO_DATA_FOUND"),""))}const k=function(){return[10,20,30]},q=[{path:"",component:(()=>{class e extends u.H{constructor(o,c,r,C){super(),this.notificationService=o,this.router=c,this.overlay=r,this.documentService=C,this.notifications=[],this.displayedColumns=["action","createdDate","message"],this.isLoadingResults=!0,this.notificationResource=new N.J,this.notificationResource.pageSize=10,this.notificationResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new b(this.notificationService),this.dataSource.loadNotifications(this.notificationResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,T.T)(this.sort.sortChange,this.paginator.page).pipe((0,S.b)(()=>{this.notificationResource.skip=this.paginator.pageIndex,this.notificationResource.pageSize=this.paginator.pageSize,this.notificationResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadNotifications(this.notificationResource)})).subscribe(),this.sub$.sink=(0,f.R)(this.input.nativeElement,"keyup").pipe((0,i.b)(1e3),(0,a.x)(),(0,S.b)(()=>{this.paginator.pageIndex=0,this.notificationResource.name=this.input.nativeElement.value,this.dataSource.loadNotifications(this.notificationResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(o=>{o&&(this.notificationResource.pageSize=o.pageSize,this.notificationResource.skip=o.skip,this.notificationResource.totalCount=o.totalCount)})}viewDocument(o){this.sub$.sink=this.notificationService.markAsRead(o.id).subscribe(()=>{}),this.sub$.sink=this.documentService.getDocument(o.documentId).subscribe(c=>{const C=c.url.split(".")[1];this.overlay.open(L.Y,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:{documentId:c.id,name:c.name,extension:C,isRestricted:!1,isVersion:!1}})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(U.g),t.Y36(p.F0),t.Y36(O.T),t.Y36(M.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification-list"]],viewQuery:function(o,c){if(1&o&&(t.Gf(v.NW,5),t.Gf(m.YE,5),t.Gf(_,5)),2&o){let r;t.iGM(r=t.CRH())&&(c.paginator=r.first),t.iGM(r=t.CRH())&&(c.sort=r.first),t.iGM(r=t.CRH())&&(c.input=r.first)}},features:[t.qOj],decls:30,vars:18,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"table-container"],[1,"row"],[1,"ml-2","col-sm-5"],[1,"w-100"],["matInput","",3,"placeholder"],["input",""],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdDate"],["matColumnDef","message"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"length","pageSize","pageSizeOptions"],[1,"loading-shade"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","button","class","btn btn-sm btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"las","la-eye"],["class","badge badge-success",4,"ngIf"],[1,"badge","badge-success"],["mat-header-row",""],["mat-row",""],[1,"col-sm-12","ml-4","mt-3"],[1,"font-weight-bold"]],template:function(o,c){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()(),t.TgZ(6,"div",3),t.YNc(7,Y,2,0,"div",4),t.ALo(8,"async"),t.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8),t._UZ(13,"input",9,10),t.ALo(15,"translate"),t.qZA()()(),t.TgZ(16,"table",11),t.ynx(17,12),t.YNc(18,$,3,3,"th",13),t.YNc(19,Q,2,1,"td",14),t.BQk(),t.ynx(20,15),t.YNc(21,H,3,3,"th",13),t.YNc(22,z,3,4,"td",14),t.BQk(),t.ynx(23,16),t.YNc(24,F,3,3,"th",13),t.YNc(25,W,4,3,"td",14),t.BQk(),t.YNc(26,P,1,0,"tr",17),t.YNc(27,V,1,0,"tr",18),t.qZA(),t.YNc(28,X,6,3,"ng-container",19),t._UZ(29,"mat-paginator",20),t.qZA()()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,11,"NOTIFICATIONS")),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,13,c.dataSource.loading$)),t.xp6(6),t.s9C("placeholder",t.lcZ(15,15,"SEARCH_BY_DOCUMENT_NAME_OR_MESSAGE")),t.xp6(3),t.Q6J("dataSource",c.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",c.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===c.dataSource.count),t.xp6(1),t.Q6J("length",c.notificationResource.totalCount)("pageSize",c.notificationResource.pageSize)("pageSizeOptions",t.DdM(17,k)))},dependencies:[d.O5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,A.Ou,j.KE,m.YE,m.nU,v.NW,D.Nt,d.Ov,d.uU,I.X$]}),e})(),canActivate:[h.a]}];let tt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(q),p.Bz]}),e})();var et=n(4107),it=n(2368),nt=n(6845);let ot=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,nt.m,tt,l.p0,A.Cq,et.LD,it.rP,m.JX,v.TU,D.c]}),e})()}}]);