"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[864],{6864:(nt,g,o)=>{o.r(g),o.d(g,{LoginAuditModule:()=>et});var d=o(9808),s=o(2075),m=o(773),l=o(4847),r=o(6087),p=o(7531),h=o(2784),v=o(319),T=o(5519);class C extends T.r{constructor(){super(...arguments),this.id="",this.userName=""}}var Z=o(6787),x=o(3753),A=o(2868),y=o(13),R=o(5778),b=o(2676),c=o(591),N=o(1086),f=o(7221),j=o(537);class U{constructor(n){this.loginAuditService=n,this.loginAuditSubject=new c.X([]),this.responseHeaderSubject=new c.X(null),this.loadingSubject=new c.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}get count(){return this._count}connect(){return this.loginAuditSubject.asObservable()}disconnect(){this.loginAuditSubject.complete(),this.loadingSubject.complete()}loadLoginAudits(n){this.loadingSubject.next(!0),this.loginAuditService.getLoginAudits(n).pipe((0,f.K)(()=>(0,N.of)([])),(0,j.x)(()=>this.loadingSubject.next(!1))).subscribe(e=>{const a=JSON.parse(e.headers.get("X-Pagination"));this.responseHeaderSubject.next(a);const u=[...e.body];this._count=u.length,this.loginAuditSubject.next(u)})}}var t=o(5e3),L=o(520),D=o(8032);let I=(()=>{class i{constructor(e,a){this.httpClient=e,this.commonHttpErrorService=a}getLoginAudits(e){const u=(new L.LE).set("Fields",e.fields).set("OrderBy",e.orderBy).set("PageSize",e.pageSize.toString()).set("Skip",e.skip.toString()).set("SearchQuery",e.searchQuery).set("id",e.id.toString()).set("userName",e.userName.toString());return this.httpClient.get("LoginAudit",{params:u,observe:"response"}).pipe((0,f.K)(this.commonHttpErrorService.handleError))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(L.eN),t.LFG(D.U))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var O=o(7322),S=o(2925);const Y=["input"];function z(i,n){1&i&&(t.TgZ(0,"div",24),t._UZ(1,"mat-spinner"),t.qZA())}function E(i,n){1&i&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DATE_TIME")," "))}function Q(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==e?null:e.loginTime,"dd/MM/yyyy hh:mm:ss")," ")}}function B(i,n){1&i&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"EMAIL")," "))}function H(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.userName," ")}}function M(i,n){1&i&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"STATUS")," "))}function $(i,n){if(1&i&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(null==e?null:e.status)}}function w(i,n){if(1&i&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(null==e?null:e.status)}}function G(i,n){if(1&i&&(t.TgZ(0,"td",26),t.YNc(1,$,2,1,"span",27),t.YNc(2,w,2,1,"span",28),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf","Success"==(null==e?null:e.status)),t.xp6(1),t.Q6J("ngIf","Error"==(null==e?null:e.status))}}function J(i,n){1&i&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"IP_ADDRESS")," "))}function P(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.remoteIP," ")}}function F(i,n){1&i&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij("",t.lcZ(2,1,"LATITUDE")," "))}function X(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.latitude," ")}}function K(i,n){1&i&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"LONGITUDE")," "))}function W(i,n){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.longitude," ")}}function q(i,n){1&i&&t._UZ(0,"tr",32)}function V(i,n){1&i&&t._UZ(0,"tr",33)}function k(i,n){1&i&&(t.ynx(0),t.TgZ(1,"div",34)(2,"div",35)(3,"label",36),t._uU(4),t.ALo(5,"translate"),t.qZA()()(),t.BQk()),2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"NO_DATA_FOUND")))}const _=function(){return[10,20,30]},tt=[{path:"",component:(()=>{class i extends b.H{constructor(e){super(),this.loginAuditService=e,this.loginAudits=[],this.displayedColumns=["loginTime","userName","remoteIP","status","latitude","longitude"],this.isLoadingResults=!0,this.loginAuditResource=new C,this.loginAuditResource.pageSize=10,this.loginAuditResource.orderBy="loginTime desc"}ngOnInit(){this.dataSource=new U(this.loginAuditService),this.dataSource.loadLoginAudits(this.loginAuditResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,Z.T)(this.sort.sortChange,this.paginator.page).pipe((0,A.b)(e=>{this.loginAuditResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.loginAuditResource.pageSize=this.paginator.pageSize,this.loginAuditResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe(),this.sub$.sink=(0,x.R)(this.input.nativeElement,"keyup").pipe((0,y.b)(1e3),(0,R.x)(),(0,A.b)(()=>{this.paginator.pageIndex=0,this.loginAuditResource.userName=this.input.nativeElement.value,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(e=>{e&&(this.loginAuditResource.pageSize=e.pageSize,this.loginAuditResource.skip=e.skip,this.loginAuditResource.totalCount=e.totalCount)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(I))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-login-audit-list"]],viewQuery:function(e,a){if(1&e&&(t.Gf(r.NW,5),t.Gf(l.YE,5),t.Gf(Y,5)),2&e){let u;t.iGM(u=t.CRH())&&(a.paginator=u.first),t.iGM(u=t.CRH())&&(a.sort=u.first),t.iGM(u=t.CRH())&&(a.input=u.first)}},features:[t.qOj],decls:38,vars:18,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"table-container"],[1,"m-2","col-sm-5"],["appearance","outline",1,"w-100"],["matInput","",3,"placeholder"],["input",""],["mat-table","","matSort","","matSortActive","loginTime","matSortDirection","desc",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","loginTime"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","status"],["matColumnDef","remoteIP"],["matColumnDef","latitude"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","longitude"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"length","pageSize","pageSizeOptions"],[1,"loading-shade"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-success",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-warning"],["mat-header-cell",""],["mat-header-row",""],["mat-row",""],[1,"row"],[1,"col-sm-12","ml-4","mt-3"],[1,"font-weight-bold"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()(),t.TgZ(6,"div",3),t.YNc(7,z,2,0,"div",4),t.ALo(8,"async"),t.TgZ(9,"div",5)(10,"div",6)(11,"mat-form-field",7),t._UZ(12,"input",8,9),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"table",10),t.ynx(16,11),t.YNc(17,E,3,3,"th",12),t.YNc(18,Q,3,4,"td",13),t.BQk(),t.ynx(19,14),t.YNc(20,B,3,3,"th",12),t.YNc(21,H,2,1,"td",13),t.BQk(),t.ynx(22,15),t.YNc(23,M,3,3,"th",12),t.YNc(24,G,3,2,"td",13),t.BQk(),t.ynx(25,16),t.YNc(26,J,3,3,"th",12),t.YNc(27,P,2,1,"td",13),t.BQk(),t.ynx(28,17),t.YNc(29,F,3,3,"th",18),t.YNc(30,X,2,1,"td",13),t.BQk(),t.ynx(31,19),t.YNc(32,K,3,3,"th",18),t.YNc(33,W,2,1,"td",13),t.BQk(),t.YNc(34,q,1,0,"tr",20),t.YNc(35,V,1,0,"tr",21),t.qZA(),t.YNc(36,k,6,3,"ng-container",22),t._UZ(37,"mat-paginator",23),t.qZA()()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,11,"LOGIN_AUDIT_LOGS")),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,13,a.dataSource.loading$)),t.xp6(5),t.s9C("placeholder",t.lcZ(14,15,"SEARCH_BY_USERNAME")),t.xp6(3),t.Q6J("dataSource",a.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===a.dataSource.count),t.xp6(1),t.Q6J("length",a.loginAuditResource.totalCount)("pageSize",a.loginAuditResource.pageSize)("pageSizeOptions",t.DdM(17,_)))},dependencies:[d.O5,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,m.Ou,l.YE,l.nU,r.NW,O.KE,p.Nt,d.Ov,d.uU,S.X$],styles:[".badge[_ngcontent-%COMP%]{font-weight:400;padding:.5em .6em}"]}),i})(),data:{claimType:"login_audit_view_login_audit_logs"},canActivate:[v.a]}];let it=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[h.Bz.forChild(tt),h.Bz]}),i})(),et=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,s.p0,m.Cq,l.JX,r.TU,p.c,it,S.aw]}),i})()}}]);