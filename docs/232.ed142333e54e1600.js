"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[232],{7232:(tt,N,a)=>{a.r(N),a.d(N,{UserModule:()=>ze});var p=a(9808),d=a(2784),h=a(319),c=a(3075),v=a(2676),e=a(5e3),g=a(1584),Z=a(2457),w=a(690),U=a(6107),b=a(7322),T=a(4107),F=a(508),C=a(9785),x=a(2925);function O(t,i){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADD_USER")))}function Y(t,i){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"EDIT_USER")))}function M(t,i){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME_IS_REQUIRED")," "))}function q(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,M,3,3,"div",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("firstName").errors?null:s.userForm.get("firstName").errors.required)}}function J(t,i){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME_IS_REQUIRED")," "))}function Q(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,J,3,3,"div",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("lastName").errors?null:s.userForm.get("lastName").errors.required)}}function D(t,i){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_IS_REQUIRED")," "))}function k(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,D,3,3,"div",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("phoneNumber").errors?null:s.userForm.get("phoneNumber").errors.required)}}function y(t,i){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL_IS_REQUIRED")," "))}function $(t,i){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function j(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,y,3,3,"div",21),e.YNc(2,$,3,3,"div",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("email").errors?null:s.userForm.get("email").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("email").errors?null:s.userForm.get("email").errors.email)}}function H(t,i){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function B(t,i){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function V(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,H,3,3,"div",21),e.YNc(2,B,3,3,"div",21),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("password").errors?null:s.userForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("password").errors?null:s.userForm.get("password").errors.minlength)}}function G(t,i){if(1&t&&(e.TgZ(0,"div",6)(1,"div",7)(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",23),e.YNc(6,V,3,2,"div",3),e.qZA()()),2&t){const s=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",s.userForm.get("password").touched&&s.userForm.get("password").errors)}}function W(t,i){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function K(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,W,3,3,"div",21),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("confirmPassword").errors?null:s.userForm.get("confirmPassword").errors.required)}}function X(t,i){1&t&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}function z(t,i){if(1&t&&(e.TgZ(0,"div",6)(1,"div",7)(2,"label"),e._uU(3,"Confirm Password"),e.qZA(),e._UZ(4,"input",24),e.YNc(5,K,2,1,"div",3),e.YNc(6,X,3,3,"div",21),e.qZA()()),2&t){const s=e.oxw();e.xp6(5),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.hasError("notSame"))}}function ee(t,i){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" ",s.selectedRoles[0].name," ")}}function te(t,i){if(1&t&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.AsE(" (+",s.selectedRoles.length-1," ",2===s.selectedRoles.length?"other":"others",") ")}}function se(t,i){if(1&t&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s.name)}}function ne(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(s);const o=e.oxw(2);return e.KtG(o.saveUser())}),e._UZ(1,"i",29),e._uU(2," Save"),e.qZA()}}function ie(t,i){1&t&&(e.ynx(0),e.YNc(1,ne,3,0,"button",27),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","user_edit_user"))}function oe(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(s);const o=e.oxw(2);return e.KtG(o.saveUser())}),e._UZ(1,"i",29),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}function re(t,i){1&t&&(e.ynx(0),e.YNc(1,oe,4,3,"button",27),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","user_create_user"))}const ae=function(){return["/users"]};let L=(()=>{class t extends v.H{constructor(s,n,o,r,l,m,f){super(),this.fb=s,this.router=n,this.activeRoute=o,this.userService=r,this.toastrService=l,this.commonService=m,this.translationService=f,this.isEditMode=!1,this.selectedRoles=[]}ngOnInit(){this.createUserForm(),this.sub$.sink=this.activeRoute.data.subscribe(s=>{s.user?(this.isEditMode=!0,this.userForm.patchValue(s.user),this.user=s.user):(this.userForm.get("password").setValidators([c.kI.required,c.kI.minLength(6)]),this.userForm.get("confirmPassword").setValidators([c.kI.required]))}),this.getRoles()}createUserForm(){this.userForm=this.fb.group({id:[""],firstName:["",[c.kI.required]],lastName:["",[c.kI.required]],email:["",[c.kI.required,c.kI.email]],phoneNumber:["",[c.kI.required]],password:[""],confirmPassword:[""]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}saveUser(){if(this.userForm.valid){const s=this.createBuildObject();this.sub$.sink=this.isEditMode?this.userService.updateUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])}):this.userService.addUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_CREATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}else this.toastrService.error(this.translationService.getValue("PLEASE_ENTER_PROPER_DATA"))}createBuildObject(){return{id:this.userForm.get("id").value,firstName:this.userForm.get("firstName").value,lastName:this.userForm.get("lastName").value,email:this.userForm.get("email").value,phoneNumber:this.userForm.get("phoneNumber").value,password:this.userForm.get("password").value,userName:this.userForm.get("email").value,userRoles:this.getSelectedRoles()}}getSelectedRoles(){return this.selectedRoles.map(s=>({userId:this.userForm.get("id").value,roleId:s.id}))}getRoles(){this.sub$.sink=this.commonService.getRoles().subscribe(s=>{if(this.roleList=s,this.isEditMode){const n=this.user.userRoles.map(o=>o.roleId);this.selectedRoles=this.roleList.filter(o=>n.indexOf(o.id)>-1)}})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(c.QS),e.Y36(d.F0),e.Y36(d.gz),e.Y36(g.K),e.Y36(Z._W),e.Y36(w.v),e.Y36(U.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manage-user"]],features:[e.qOj],decls:53,vars:33,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["formControlName","firstName","type","text",1,"form-control"],["formControlName","lastName","type","text",1,"form-control"],["formControlName","phoneNumber","type","text",1,"form-control"],["formControlName","email","type","email",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"form-group","col-md-6"],["appearance","fill"],["multiple","",3,"value","valueChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"m-top-10","col-md-12"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"las","la-times-circle"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],[1,"example-additional-selection"],[3,"value"],["class","btn btn-success btn-sm m-right-10","cdkFocusInitial","",3,"click",4,"hasClaim"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-save"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,O,3,3,"h2",3),e.YNc(4,Y,3,3,"h2",3),e.qZA()()(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,q,2,1,"div",3),e.qZA()(),e.TgZ(14,"div",6)(15,"div",7)(16,"label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",9),e.YNc(20,Q,2,1,"div",3),e.qZA()(),e.TgZ(21,"div",6)(22,"div",7)(23,"label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"input",10),e.YNc(27,k,2,1,"div",3),e.qZA()(),e.TgZ(28,"div",6)(29,"div",7)(30,"label"),e._uU(31,"Email"),e.qZA(),e._UZ(32,"input",11),e.YNc(33,j,3,2,"div",3),e.qZA()(),e.YNc(34,G,7,4,"div",12),e.YNc(35,z,7,2,"div",12),e.TgZ(36,"div",13)(37,"mat-form-field",14)(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"mat-select",15),e.NdJ("valueChange",function(r){return n.selectedRoles=r}),e.TgZ(42,"mat-select-trigger"),e.YNc(43,ee,2,1,"span",3),e.YNc(44,te,2,2,"span",16),e.qZA(),e.YNc(45,se,2,2,"mat-option",17),e.qZA()()(),e.TgZ(46,"div",18),e.YNc(47,ie,2,1,"ng-container",3),e.YNc(48,re,2,1,"ng-container",3),e.TgZ(49,"button",19),e._UZ(50,"i",20),e._uU(51),e.ALo(52,"translate"),e.qZA()()()()),2&s&&(e.xp6(3),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("ngIf",n.isEditMode),e.xp6(1),e.Q6J("formGroup",n.userForm),e.xp6(5),e.Oqu(e.lcZ(11,22,"FIRST_NAME")),e.xp6(3),e.Q6J("ngIf",n.userForm.get("firstName").touched&&n.userForm.get("firstName").errors),e.xp6(4),e.Oqu(e.lcZ(18,24,"LAST_NAME")),e.xp6(3),e.Q6J("ngIf",n.userForm.get("lastName").touched&&n.userForm.get("lastName").errors),e.xp6(4),e.Oqu(e.lcZ(25,26,"MOBILE_NUMBER")),e.xp6(3),e.Q6J("ngIf",n.userForm.get("phoneNumber").touched&&n.userForm.get("phoneNumber").errors),e.xp6(5),e.uIk("disabled",n.isEditMode?"":null),e.xp6(1),e.Q6J("ngIf",n.userForm.get("email").touched&&n.userForm.get("email").errors),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(4),e.Oqu(e.lcZ(40,28,"ROLES")),e.xp6(2),e.Q6J("value",n.selectedRoles),e.xp6(2),e.Q6J("ngIf",n.selectedRoles.length>0),e.xp6(1),e.Q6J("ngIf",n.selectedRoles.length>1),e.xp6(1),e.Q6J("ngForOf",n.roleList),e.xp6(2),e.Q6J("ngIf",n.isEditMode),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("routerLink",e.DdM(32,ae)),e.xp6(2),e.hij(" ",e.lcZ(52,30,"CANCEL"),""))},dependencies:[p.sg,p.O5,d.rH,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,b.KE,b.hX,T.gD,T.$L,F.ey,C.d,x.X$],styles:[".example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}"]}),t})(),S=(()=>{class t{constructor(s){this.userService=s}resolve(s,n){const o=s.paramMap.get("id");return this.userService.getUser(o)}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(g.K))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var _=a(2349);function ce(t,i){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function le(t,i){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function me(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ce,3,3,"div",9),e.YNc(2,le,3,3,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.minlength)}}function ue(t,i){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function de(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ue,3,3,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("confirmPassword").errors?null:s.resetPasswordForm.get("confirmPassword").errors.required)}}function pe(t,i){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}let _e=(()=>{class t extends v.H{constructor(s,n,o,r,l,m){super(),this.userService=s,this.fb=n,this.dialogRef=o,this.data=r,this.toastrService=l,this.translationService=m}ngOnInit(){this.createResetPasswordForm(),this.resetPasswordForm.get("email").setValue(this.data.userName)}createResetPasswordForm(){this.resetPasswordForm=this.fb.group({email:[],password:["",[c.kI.required,c.kI.minLength(6)]],confirmPassword:["",[c.kI.required]]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}resetPassword(){this.resetPasswordForm.valid&&(this.sub$.sink=this.userService.resetPassword(this.createBuildObject()).subscribe(s=>{this.toastrService.success(this.translationService.getValue("SUCCESSFULLY_RESET_PASSWORD")),this.dialogRef.close()}))}createBuildObject(){return{email:"",password:this.resetPasswordForm.get("password").value,userName:this.resetPasswordForm.get("email").value}}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(g.K),e.Y36(c.QS),e.Y36(_.so),e.Y36(_.WI),e.Y36(Z._W),e.Y36(U.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],features:[e.qOj],decls:35,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"col-md-12"],[1,"form-group"],["formControlName","email","type","email",1,"form-control"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],[4,"ngIf"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],["class","text-danger",4,"ngIf"],["mat-dialog-actions",""],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-save"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"las","la-times-circle"],[1,"text-danger"]],template:function(s,n){1&s&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"form",2)(5,"div",3)(6,"div",4)(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.qZA()(),e.TgZ(11,"div",3)(12,"div",4)(13,"label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",6),e.YNc(17,me,3,2,"div",7),e.qZA()(),e.TgZ(18,"div",3)(19,"div",4)(20,"label"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"input",8),e.YNc(24,de,2,1,"div",7),e.YNc(25,pe,3,3,"div",9),e.qZA()()()(),e.TgZ(26,"div",10)(27,"button",11),e.NdJ("click",function(){return n.resetPassword()}),e._UZ(28,"i",12),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"button",13),e.NdJ("click",function(){return n.onNoClick()}),e._UZ(32,"i",14),e._uU(33),e.ALo(34,"translate"),e.qZA()()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,11,"RESET_PASSWORD")),e.xp6(3),e.Q6J("formGroup",n.resetPasswordForm),e.xp6(4),e.Oqu(e.lcZ(9,13,"EMAIL")),e.xp6(2),e.uIk("disabled",!0),e.xp6(4),e.Oqu(e.lcZ(15,15,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",n.resetPasswordForm.get("password").touched&&n.resetPasswordForm.get("password").errors),e.xp6(4),e.Oqu(e.lcZ(22,17,"CONFIRM_PASSWORD")),e.xp6(3),e.Q6J("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.hasError("notSame")),e.xp6(4),e.hij(" ",e.lcZ(30,19,"SAVE"),""),e.xp6(4),e.hij(" ",e.lcZ(34,21,"CANCEL"),""))},dependencies:[p.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,_.uh,_.xY,_.H8,x.X$]}),t})();var ge=a(5485),u=a(2075),I=a(773),A=a(2181),E=a(5245);const fe=function(){return["/users/manage"]};function he(t,i){1&t&&(e.TgZ(0,"button",18),e._UZ(1,"i",19),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&t&&(e.Q6J("routerLink",e.DdM(4,fe)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"ADD_USER")," "))}function ve(t,i){1&t&&e._UZ(0,"mat-spinner")}function Ze(t,i){if(1&t&&(e.TgZ(0,"div",20),e.YNc(1,ve,1,0,"mat-spinner",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.isLoadingResults)}}function Ue(t,i){1&t&&(e.TgZ(0,"th",22)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ACTION")," "))}function xe(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.editUser(o.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"EDIT")," "))}function Ae(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.deleteUser(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"DELETE")," "))}function Te(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.userPermission(o.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"people"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"PERMISSION")," "))}function Ce(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.resetPassword(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"key"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"RESET_PASSWORD")," "))}function Se(t,i){if(1&t&&(e.TgZ(0,"td",23)(1,"button",24),e._UZ(2,"i",25),e.qZA(),e.TgZ(3,"mat-menu",null,26),e.YNc(5,xe,5,3,"button",27),e.YNc(6,Ae,5,3,"button",28),e.YNc(7,Te,5,3,"button",28),e.YNc(8,Ce,5,3,"button",28),e.qZA()()),2&t){const s=e.MAs(4);e.xp6(1),e.Q6J("matMenuTriggerFor",s),e.xp6(4),e.Q6J("hasClaim","user_edit_user"),e.xp6(1),e.Q6J("hasClaim","user_delete_user"),e.xp6(1),e.Q6J("hasClaim","user_assign_permission"),e.xp6(1),e.Q6J("hasClaim","user_reset_password")}}function Ne(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL")," "))}function we(t,i){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.email," ")}}function be(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME")," "))}function Le(t,i){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.firstName," ")}}function Ie(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME")," "))}function Ee(t,i){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.lastName," ")}}function Pe(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_NUMBER")," "))}function Re(t,i){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.phoneNumber," ")}}function Fe(t,i){1&t&&e._UZ(0,"tr",30)}function Oe(t,i){1&t&&e._UZ(0,"tr",31)}let Ye=(()=>{class t extends v.H{constructor(s,n,o,r,l,m,f){super(),this.userService=s,this.toastrService=n,this.commonService=o,this.commonDialogService=r,this.dialog=l,this.router=m,this.translationService=f,this.users=[],this.displayedColumns=["action","email","firstName","lastName","phoneNumber"],this.isLoadingResults=!0}ngOnInit(){this.getUsers()}deleteUser(s){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${s.userName}`).subscribe(n=>{n&&(this.sub$.sink=this.userService.deleteUser(s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_DELETED_SUCCESSFULLY")),this.getUsers()}))})}getUsers(){this.isLoadingResults=!0,this.sub$.sink=this.commonService.getUsers().subscribe(s=>{this.isLoadingResults=!1,this.users=s},s=>{s.messages.forEach(n=>{this.toastrService.error(n),this.isLoadingResults=!1})})}resetPassword(s){this.dialog.open(_e,{width:"350px",data:Object.assign({},s)})}editUser(s){this.router.navigate(["/users/manage",s])}userPermission(s){this.router.navigate(["/users/permission",s])}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(g.K),e.Y36(Z._W),e.Y36(w.v),e.Y36(ge.V),e.Y36(_.uw),e.Y36(d.F0),e.Y36(U.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-list"]],features:[e.qOj],decls:30,vars:9,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"widget-title"],["class","btn btn-success btn-sm m-right-10",3,"routerLink",4,"hasClaim"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","phoneNumber"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"btn","btn-success","btn-sm","m-right-10",3,"routerLink"],[1,"las","la-plus"],[1,"loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["aria-label","Action",1,"btn","btn-sm","btn-primary",3,"matMenuTriggerFor"],[1,"las","la-ellipsis-v"],["menu","matMenu"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",1)(7,"h4",3),e.YNc(8,he,4,5,"button",4),e.qZA()()(),e.TgZ(9,"div",5),e.YNc(10,Ze,2,1,"div",6),e.TgZ(11,"div",7)(12,"table",8),e.ynx(13,9),e.YNc(14,Ue,4,3,"th",10),e.YNc(15,Se,9,5,"td",11),e.BQk(),e.ynx(16,12),e.YNc(17,Ne,3,3,"th",10),e.YNc(18,we,2,1,"td",11),e.BQk(),e.ynx(19,13),e.YNc(20,be,3,3,"th",10),e.YNc(21,Le,2,1,"td",11),e.BQk(),e.ynx(22,14),e.YNc(23,Ie,3,3,"th",10),e.YNc(24,Ee,2,1,"td",11),e.BQk(),e.ynx(25,15),e.YNc(26,Pe,3,3,"th",10),e.YNc(27,Re,2,1,"td",11),e.BQk(),e.YNc(28,Fe,1,0,"tr",16),e.YNc(29,Oe,1,0,"tr",17),e.qZA()()()),2&s&&(e.xp6(4),e.Oqu(e.lcZ(5,7,"USERS")),e.xp6(4),e.Q6J("hasClaim","user_create_user"),e.xp6(2),e.Q6J("ngIf",n.isLoadingResults),e.xp6(2),e.Q6J("dataSource",n.users),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[p.O5,d.rH,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,I.Ou,C.d,A.VK,A.OP,A.p6,E.Hw,x.X$]}),t})();var P=a(2868),Me=a(38),qe=a(4479),Je=a(2328),R=a(7446);function Qe(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",20)(1,"mat-checkbox",21),e.NdJ("change",function(o){e.CHM(s);const r=e.oxw().$implicit,l=e.oxw().$implicit,m=e.oxw();return e.KtG(m.onPermissionChange(o,l,r))}),e._uU(2),e.qZA()()}if(2&t){const s=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("checked",o.checkPermission(n.id,s.id)),e.xp6(1),e.hij(" ",s.name," ")}}function De(t,i){if(1&t&&(e.ynx(0),e.YNc(1,Qe,3,2,"div",19),e.BQk()),2&t){const s=i.$implicit,n=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.checkPageAction(n.id,s.id))}}function ke(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"mat-checkbox",16),e.NdJ("change",function(o){const l=e.CHM(s).$implicit,m=e.oxw();return e.KtG(m.onPageSelect(o,l.name))}),e.TgZ(3,"b"),e._uU(4),e.qZA()()(),e.TgZ(5,"div",17),e.YNc(6,De,2,1,"ng-container",18),e.qZA()()}if(2&t){const s=i.$implicit,n=e.oxw();e.xp6(4),e.hij(" ",s.name,""),e.xp6(2),e.Q6J("ngForOf",n.operations)}}function ye(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.saveUserClaim())}),e._UZ(1,"i",23),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}const $e=function(){return["/users"]};let je=(()=>{class t{constructor(){this.manageUserClaimOperation=new e.vpe,this.step=0}ngOnInit(){}checkPageAction(s,n){return!!this.screenOperations.find(r=>r.screenId===s&&r.operationId===n)}onPageSelect(s,n){if(s.checked)this.screens.filter(r=>r.name==n).forEach(r=>{this.operations.forEach(l=>{this.checkPageAction(r.id,l.id)&&this.user.userClaims.push({userId:this.user.id,claimType:`${r.name}_${l.name}`,claimValue:"",screenId:r.id,operationId:l.id})})});else{var o=this.screens.find(r=>r.name==n);this.user.userClaims=this.user.userClaims.filter(r=>r.screenId!=o.id)}}checkPermission(s,n){return!!this.user.userClaims.find(r=>r.screenId===s&&r.operationId===n)}onPermissionChange(s,n,o){if(s.checked)this.user.userClaims.push({userId:this.user.id,claimType:`${n.name}_${o.name}`,claimValue:"",screenId:n.id,operationId:o.id});else{const r=this.user.userClaims.find(m=>m.operationId===o.id&&m.screenId===n.id),l=this.user.userClaims.indexOf(r,0);l>-1&&this.user.userClaims.splice(l,1)}}saveUserClaim(){this.manageUserClaimOperation.emit(this.user)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission-presentation"]],inputs:{screens:"screens",operations:"operations",screenOperations:"screenOperations",loading:"loading",loadingScreen:"loadingScreen",loadingOperation:"loadingOperation",user:"user"},outputs:{manageUserClaimOperation:"manageUserClaimOperation"},decls:23,vars:15,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"text-info"],[1,"row","align-items-center"],[1,"col-md-4","col-sm-12"],[1,"widget-title"],[1,"row"],[1,"col-sm-12"],["fxLayout","row wrap",4,"ngFor","ngForOf"],[1,"m-top-10"],["class","btn btn-success btn-sm m-right-10","cdkFocusInitial","",3,"click",4,"hasClaim"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"las","la-times-circle"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.sm","100"],["color","primary",3,"change"],[1,"row","ml-2"],[4,"ngFor","ngForOf"],["class","col-sm-3",4,"ngIf"],[1,"col-sm-3"],["color","primary",3,"checked","change"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-save"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"span",3),e._uU(7),e.qZA()()()()(),e.TgZ(8,"div")(9,"div",4)(10,"div",5)(11,"h1",6),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8),e.YNc(16,ke,7,2,"div",9),e.qZA()()(),e.TgZ(17,"div",10),e.YNc(18,ye,4,3,"button",11),e.TgZ(19,"a",12),e._UZ(20,"i",13),e._uU(21),e.ALo(22,"translate"),e.qZA()()),2&s&&(e.xp6(4),e.hij("",e.lcZ(5,8,"USER_PAGE_PERMISSION_TO")," : "),e.xp6(3),e.AsE("",null==n.user?null:n.user.firstName," ",null==n.user?null:n.user.lastName,""),e.xp6(5),e.Oqu(e.lcZ(13,10,"PERMISSION")),e.xp6(4),e.Q6J("ngForOf",n.screens),e.xp6(2),e.Q6J("hasClaim","user_assign_permission"),e.xp6(1),e.Q6J("routerLink",e.DdM(14,$e)),e.xp6(2),e.hij(" ",e.lcZ(22,12,"CANCEL"),""))},dependencies:[p.sg,p.O5,d.yS,C.d,R.oG,x.X$]}),t})();const Be=[{path:"",component:Ye,data:{claimType:"user_view_users"},canActivate:[h.a]},{path:"manage/:id",component:L,resolve:{user:S},data:{claimType:"user_edit_user"},canActivate:[h.a]},{path:"manage",component:L,data:{claimType:"user_create_user"},canActivate:[h.a]},{path:"permission/:id",component:(()=>{class t extends v.H{constructor(s,n,o,r,l,m,f,et){super(),this.activeRoute=s,this.router=n,this.toastrService=o,this.screenService=r,this.operationService=l,this.screenOperationService=m,this.userService=f,this.translationService=et}ngOnInit(){this.sub$.sink=this.activeRoute.data.subscribe(s=>{this.user=s.user}),this.loadingOperation$=this.operationService.loaded$.pipe((0,P.b)(s=>{s||this.getOperations()})),this.operations$=this.operationService.entities$,this.loadingScreen$=this.screenService.loaded$.pipe((0,P.b)(s=>{s||this.getScreens()})),this.screens$=this.screenService.entities$,this.loading$=this.screenOperationService.loaded$,this.screenOperations$=this.screenOperationService.entities$,this.getScreenOperations()}getOperations(){this.operationService.getAll()}getScreens(){this.screenService.getAll()}getScreenOperations(){this.screenOperationService.getAll()}manageUserClaimOperation(s){this.sub$.sink=this.userService.updateUserClaim(s.userClaims,s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_PERMISSION_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(Z._W),e.Y36(Me.H),e.Y36(qe.f),e.Y36(Je.h),e.Y36(g.K),e.Y36(U.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission"]],features:[e.qOj],decls:7,vars:19,consts:[[3,"screens","operations","screenOperations","loading","loadingScreen","loadingOperation","user","manageUserClaimOperation"]],template:function(s,n){1&s&&(e.TgZ(0,"app-user-permission-presentation",0),e.NdJ("manageUserClaimOperation",function(r){return n.manageUserClaimOperation(r)}),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"async"),e.qZA()),2&s&&e.Q6J("screens",e.lcZ(1,7,n.screens$))("operations",e.lcZ(2,9,n.operations$))("screenOperations",e.lcZ(3,11,n.screenOperations$))("loading",e.lcZ(4,13,n.loading$))("loadingScreen",e.lcZ(5,15,n.loadingScreen$))("loadingOperation",e.lcZ(6,17,n.loadingOperation$))("user",n.user)},dependencies:[je,p.Ov]}),t})(),resolve:{user:S},data:{claimType:"user_assign_permission"},canActivate:[h.a]}];let Ve=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(Be),d.Bz]}),t})();var Ge=a(2368),We=a(6845),Ke=a(7423),Xe=a(1125);let ze=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[S],imports:[p.ez,Ve,c.u5,c.UX,u.p0,I.Cq,_.Is,T.LD,Ge.rP,We.m,A.Tx,Ke.ot,Xe.To,R.p9,E.Ps]}),t})()}}]);